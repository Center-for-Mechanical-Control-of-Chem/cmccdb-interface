"use strict";(self["webpackChunkapp"]=self["webpackChunkapp"]||[]).push([[548],{2262:function(e,t,s){s.d(t,{A:function(){return $}});var i=s(6768),a=s(4232),n=s(5130);const o=e=>((0,i.Qi)("data-v-38a43588"),e=e(),(0,i.jt)(),e),l={class:"table-main"},r={class:"table-container"},c={class:"header"},u={class:"title-holder"},h={class:"title"},d={key:0,class:"search-area"},m=o((()=>(0,i.Lk)("label",{for:"search"},"Search: ",-1))),p={class:"content"},v={class:"entities-holder"},g={key:0,class:"pagination"},k={class:"select"},L=o((()=>(0,i.Lk)("option",{value:"10"},"10",-1))),b=o((()=>(0,i.Lk)("option",{value:"25"},"25",-1))),y=o((()=>(0,i.Lk)("option",{value:"50"},"50",-1))),M=o((()=>(0,i.Lk)("option",{value:"100"},"100",-1))),C=[L,b,y,M],x=o((()=>(0,i.Lk)("img",{class:"chevron",src:"/img/arrowL.png"},null,-1))),O=o((()=>(0,i.Lk)("img",{class:"chevron",src:"/img/arrowL.png"},null,-1))),f=o((()=>(0,i.Lk)("span",{class:"word"},"First",-1))),w=[x,O,f],S=o((()=>(0,i.Lk)("img",{class:"chevron",src:"/img/arrowL.png"},null,-1))),_=o((()=>(0,i.Lk)("span",{class:"word"},"Previous",-1))),R=[S,_],T={class:"word"},P={class:"paginav no-click"},E={class:"word"},I={class:"word"},V=o((()=>(0,i.Lk)("span",{class:"word"},"Next",-1))),X=o((()=>(0,i.Lk)("img",{class:"chevron",src:"/img/arrowR.png"},null,-1))),A=[V,X],D=o((()=>(0,i.Lk)("span",{class:"word"},"Last",-1))),B=o((()=>(0,i.Lk)("img",{class:"chevron",src:"/img/arrowR.png"},null,-1))),F=o((()=>(0,i.Lk)("img",{class:"chevron",src:"/img/arrowR.png"},null,-1))),K=[D,B,F];function N(e,t,s,o,L,b){return(0,i.uX)(),(0,i.CE)("div",l,[(0,i.Lk)("div",r,[(0,i.Lk)("div",c,[(0,i.Lk)("div",u,[(0,i.Lk)("div",h,(0,a.v_)(s.title),1)])]),s.displaySearch?((0,i.uX)(),(0,i.CE)("div",d,[m,(0,i.bo)((0,i.Lk)("input",{type:"text",id:"search","onUpdate:modelValue":t[0]||(t[0]=e=>L.searchString=e)},null,512),[[n.Jo,L.searchString]])])):(0,i.Q3)("",!0),(0,i.Lk)("div",p,[(0,i.Lk)("div",v,[(0,i.RG)(e.$slots,"default",{entities:b.paginatedEntities},void 0,!0)]),L.pagination&&L.entities?((0,i.uX)(),(0,i.CE)("div",g,[(0,i.Lk)("div",k,[(0,i.eW)("Showing "),(0,i.bo)((0,i.Lk)("select",{name:"pagination",id:"pagination","onUpdate:modelValue":t[1]||(t[1]=e=>L.pagination=e)},C,512),[[n.u1,L.pagination]]),(0,i.eW)(" of "+(0,a.v_)(b.filteredEntities.length)+" entries.",1)]),(0,i.Lk)("div",{class:"paginav first",onClick:t[2]||(t[2]=e=>L.currentPage=1)},w),(0,i.Lk)("div",{class:"prev paginav",onClick:t[3]||(t[3]=e=>L.currentPage=b.pagiPrev)},R),(0,i.Lk)("div",{class:(0,a.C4)(["paginav",L.currentPage>1?"":"no-click"]),onClick:t[4]||(t[4]=e=>L.currentPage=L.currentPage>1?L.currentPage-1:L.currentPage)},[(0,i.Lk)("span",T,(0,a.v_)(L.currentPage>1?L.currentPage-1:"..."),1)],2),(0,i.Lk)("div",P,[(0,i.Lk)("span",E,(0,a.v_)(L.currentPage),1)]),(0,i.Lk)("div",{class:(0,a.C4)(["paginav",L.currentPage<b.lastPage?"":"no-click"]),onClick:t[5]||(t[5]=e=>L.currentPage=L.currentPage<b.lastPage?L.currentPage+1:L.currentPage)},[(0,i.Lk)("span",I,(0,a.v_)(L.currentPage<b.lastPage?L.currentPage+1:"..."),1)],2),(0,i.Lk)("div",{class:"next paginav",onClick:t[6]||(t[6]=e=>L.currentPage=b.pagiNext)},A),(0,i.Lk)("div",{class:"paginav last",onClick:t[7]||(t[7]=e=>L.currentPage=b.lastPage)},K)])):(0,i.Q3)("",!0)])])])}var Q={props:{tableData:Array,title:String,displaySearch:{type:Boolean,default:!0}},watch:{pagination(){this.currentPage=1}},data(){return{entities:null,localFilters:[],search:"",currentPage:1,loading:!0,pagination:10,searchString:""}},computed:{filteredEntities(){if(!this.entities)return[];let e=this.entities;return this.searchString&&(e=e.filter((e=>{let t=Array.apply(null,Array(this.searchArray.length));return this.searchArray.forEach(((s,i)=>{Object.keys(e).forEach((a=>{e[a].toString().toLowerCase().includes(s.toLowerCase())&&(t[i]=!0)}))})),console.log("matching",t.includes(void 0)),!t.includes(void 0)}))),e},paginatedEntities(){return this.filteredEntities.slice(this.pagiBottom,this.pagiTop)},pagiBottom(){return(this.currentPage-1)*this.pagination},pagiTop(){return this.currentPage*this.pagination||1},lastPage(){return this.pagination&&this.filteredEntities?Math.ceil((this.filteredEntities.length||1)/this.pagination):1},pagiPrev(){return 1===this.currentPage?this.lastPage:this.currentPage-1},pagiNext(){return this.currentPage===this.lastPage?1:this.currentPage+1},searchArray(){return this.searchString.split(" ")}},methods:{},async mounted(){this.entities=this.tableData}},q=s(1241);const W=(0,q.A)(Q,[["render",N],["__scopeId","data-v-38a43588"]]);var $=W},6426:function(e,t,s){s.r(t),s.d(t,{default:function(){return us}});var i=s(6768),a=s(4232);const n=e=>((0,i.Qi)("data-v-df10f4ee"),e=e(),(0,i.jt)(),e),o={id:"search-main"},l=n((()=>(0,i.Lk)("div",{class:"title"},"Filters & Options",-1))),r={class:"options-holder"},c=n((()=>(0,i.Lk)("div",{class:"line"},null,-1))),u=n((()=>(0,i.Lk)("div",{class:"line"},null,-1))),h=n((()=>(0,i.Lk)("div",{class:"line"},null,-1))),d=[c,u,h],m={class:"search-results"},p={key:1,class:"no-results"},v=n((()=>(0,i.Lk)("div",{class:"title"},"No results. Adjust the filters and options and search again.",-1))),g=[v],k={key:2,class:"loading"};function L(e,t,s,n,c,u){const h=(0,i.g2)("SearchOptions"),v=(0,i.g2)("SearchResults"),L=(0,i.g2)("LoadingSpinner");return(0,i.uX)(),(0,i.CE)("div",o,[(0,i.Lk)("div",{class:(0,a.C4)(["search-options-container",c.showOptions?"slide-out":"hidden"])},[l,(0,i.Lk)("div",r,[(0,i.bF)(h,{onSearchOptions:u.updateSearchOptions},null,8,["onSearchOptions"])]),(0,i.Lk)("div",{class:"slide-out-tab",onClick:t[0]||(t[0]=e=>c.showOptions=!c.showOptions)},d)],2),(0,i.Lk)("div",m,[!c.loading&&c.searchResults?.length?((0,i.uX)(),(0,i.Wv)(v,{key:0,searchResults:c.searchResults},null,8,["searchResults"])):c.loading||c.searchResults?.length?((0,i.uX)(),(0,i.CE)("div",k,[(0,i.bF)(L)])):((0,i.uX)(),(0,i.CE)("div",p,g))])])}s(4114);var b=s(5130);const y=e=>((0,i.Qi)("data-v-5ed4ebb8"),e=e(),(0,i.jt)(),e),M={class:"search-options"},C=y((()=>(0,i.Lk)("span",null,"Components",-1))),x=y((()=>(0,i.Lk)("i",{class:"material-icons"},"expand_less",-1))),O=[C,x],f={key:0,class:"options-container",id:"searchByReagent"},w=y((()=>(0,i.Lk)("div",{class:"section"},null,-1))),S={class:"subtitle"},_={class:"tabs"},R=["onClick"],T={class:"section"},P=y((()=>(0,i.Lk)("div",{class:"subtitle"},"General Options",-1))),E={class:"general options"},I=y((()=>(0,i.Lk)("label",{for:"stereo"},"Use Stereochemistry",-1))),V=y((()=>(0,i.Lk)("label",{for:"similarity"},"Similarity Threshold",-1))),X={class:"slider-input"},A={class:"value"},D={class:"section"},B=y((()=>(0,i.Lk)("div",{class:"subtitle"},"Reactants & Reagents",-1))),F={class:"reagent options"},K={class:"draw"},N=["onClick"],Q=y((()=>(0,i.Lk)("i",{class:"material-icons"},"draw",-1))),q=[Q],W={class:"field long"},$=["onUpdate:modelValue"],j={class:"delete"},U=["onClick"],H=y((()=>(0,i.Lk)("i",{class:"material-icons"},"delete",-1))),J=[H],G={key:0,class:"copy"},Y={id:"add-component"},z=y((()=>(0,i.Lk)("i",{class:"material-icons"},"add",-1))),Z={class:"section"},ee=y((()=>(0,i.Lk)("div",{class:"subtitle"},"Products",-1))),te={class:"reagent options"},se={class:"draw"},ie=["onClick"],ae=y((()=>(0,i.Lk)("i",{class:"material-icons"},"draw",-1))),ne=[ae],oe={class:"field long"},le=["onUpdate:modelValue"],re={class:"delete"},ce=["onClick"],ue=y((()=>(0,i.Lk)("i",{class:"material-icons"},"delete",-1))),he=[ue],de={key:0,class:"copy"},me={id:"add-component"},pe=y((()=>(0,i.Lk)("i",{class:"material-icons"},"add",-1))),ve=y((()=>(0,i.Lk)("span",null,"Reactions",-1))),ge=y((()=>(0,i.Lk)("i",{class:"material-icons"},"expand_less",-1))),ke=[ve,ge],Le={key:0,class:"options-container",id:"searchByReaction"},be={class:"slider-input multi"},ye=y((()=>(0,i.Lk)("label",{for:"yield"},"Yield",-1))),Me={class:"value"},Ce={class:"slider-input multi"},xe=y((()=>(0,i.Lk)("label",{for:"yield"},"Conversion",-1))),Oe={class:"value"},fe=y((()=>(0,i.Lk)("span",null,"Mechanochemistry",-1))),we=y((()=>(0,i.Lk)("i",{class:"material-icons"},"expand_less",-1))),Se=[fe,we],_e={key:0,class:"options-container",id:"searchByMechano"},Re={class:"section"},Te=y((()=>(0,i.Lk)("div",{class:"subtitle"},"Treatment Type",-1))),Pe={class:"general options"},Ee=y((()=>(0,i.Lk)("option",{value:"BALL_MILL"},"Ball Milling",-1))),Ie=y((()=>(0,i.Lk)("option",{value:"AFM"},"AFM",-1))),Ve=y((()=>(0,i.Lk)("option",{value:"HAND_GRIND"},"Hand Grinding",-1))),Xe=y((()=>(0,i.Lk)("option",{value:"TWIN_SCREW"},"Twin Screw",-1))),Ae=[Ee,Ie,Ve,Xe],De={class:"section"},Be=y((()=>(0,i.Lk)("div",{class:"subtitle"},"Treatment Modifiers",-1))),Fe={class:"general options"},Ke=y((()=>(0,i.Lk)("label",{for:"liquass",style:{"margin-right":"15px"}},"Liquid Assisted",-1))),Ne=y((()=>(0,i.Lk)("span",null,"Datasets",-1))),Qe=y((()=>(0,i.Lk)("i",{class:"material-icons"},"expand_less",-1))),qe=[Ne,Qe],We={key:0,class:"options-container",id:"searchByDataset"},$e=y((()=>(0,i.Lk)("div",{class:"options-title",id:"searchParameters"},"Search Parameters",-1))),je={class:"options-container"},Ue={class:"section"},He=y((()=>(0,i.Lk)("label",{for:"limit"},"Result Limit ",-1))),Je={class:"search-button"},Ge=y((()=>(0,i.Lk)("b",null,"Search",-1))),Ye=[Ge];function ze(e,t,s,n,o,l){const r=(0,i.g2)("SearchItemList"),c=(0,i.g2)("MultiRangeSlider"),u=(0,i.g2)("ModalKetcher");return(0,i.uX)(),(0,i.CE)(i.FK,null,[(0,i.Lk)("div",M,[(0,i.Lk)("div",{class:(0,a.C4)(["options-title",o.showReagentOptions?"":"closed"]),onClick:t[0]||(t[0]=e=>o.showReagentOptions=!o.showReagentOptions)},O,2),(0,i.bF)(b.eB,{name:"expand"},{default:(0,i.k6)((()=>[o.showReagentOptions?((0,i.uX)(),(0,i.CE)("div",f,[w,(0,i.Lk)("div",S,[(0,i.Lk)("div",_,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(o.matchModes,(e=>((0,i.uX)(),(0,i.CE)("div",{class:(0,a.C4)(["tab capitalize",o.reagentOptions.matchMode===e?"selected":""]),onClick:t=>o.reagentOptions.matchMode=e},(0,a.v_)(e),11,R)))),256))])]),(0,i.Lk)("div",T,[P,(0,i.Lk)("div",E,[I,(0,i.bo)((0,i.Lk)("input",{id:"stereo",type:"checkbox","onUpdate:modelValue":t[1]||(t[1]=e=>o.reagentOptions.useStereochemistry=e)},null,512),[[b.lH,o.reagentOptions.useStereochemistry]]),"similar"===o.reagentOptions.matchMode?((0,i.uX)(),(0,i.CE)(i.FK,{key:0},[V,(0,i.Lk)("div",X,[(0,i.Lk)("div",A,(0,a.v_)(l.simThresholdDisplay),1),(0,i.bo)((0,i.Lk)("input",{id:"similarity",type:"range",min:"0.1",max:"1.0",step:"0.01","onUpdate:modelValue":t[2]||(t[2]=e=>o.reagentOptions.similarityThreshold=e)},null,512),[[b.Jo,o.reagentOptions.similarityThreshold]])])],64)):(0,i.Q3)("",!0)])]),(0,i.Lk)("div",D,[B,(0,i.Lk)("div",F,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(o.reagentOptions.reactants,((e,t)=>((0,i.uX)(),(0,i.CE)(i.FK,null,[(0,i.Lk)("div",K,[(0,i.Lk)("button",{onClick:e=>l.openKetcherModal("reactants",t)},q,8,N)]),(0,i.Lk)("div",W,[(0,i.bo)((0,i.Lk)("input",{type:"text","onUpdate:modelValue":t=>e.smileSmart=t},null,8,$),[[b.Jo,e.smileSmart]])]),(0,i.Lk)("div",j,[(0,i.Lk)("button",{onClick:e=>o.reagentOptions.reactants.splice(t,1)},J,8,U)])],64)))),256)),o.reagentOptions.reactants.length?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",G,"No components")),(0,i.Lk)("div",Y,[(0,i.Lk)("button",{type:"button",onClick:t[3]||(t[3]=e=>this.reagentOptions.reactants.push({smileSmart:"",source:"input"}))},[z,(0,i.eW)(" Add Component")])])])]),(0,i.Lk)("div",Z,[ee,(0,i.Lk)("div",te,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(o.reagentOptions.products,((e,t)=>((0,i.uX)(),(0,i.CE)(i.FK,null,[(0,i.Lk)("div",se,[(0,i.Lk)("button",{onClick:e=>l.openKetcherModal("products",t)},ne,8,ie)]),(0,i.Lk)("div",oe,[(0,i.bo)((0,i.Lk)("input",{type:"text","onUpdate:modelValue":t=>e.smileSmart=t},null,8,le),[[b.Jo,e.smileSmart]])]),(0,i.Lk)("div",re,[(0,i.Lk)("button",{onClick:e=>o.reagentOptions.products.splice(t,1)},he,8,ce)])],64)))),256)),o.reagentOptions.products.length?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",de,"No components")),(0,i.Lk)("div",me,[(0,i.Lk)("button",{type:"button",onClick:t[4]||(t[4]=e=>this.reagentOptions.products.push({smileSmart:"",source:"output"}))},[pe,(0,i.eW)(" Add Component")])])])])])):(0,i.Q3)("",!0)])),_:1}),(0,i.Lk)("div",{class:(0,a.C4)(["options-title",o.showReactionOptions?"":"closed"]),onClick:t[5]||(t[5]=e=>o.showReactionOptions=!o.showReactionOptions)},ke,2),(0,i.bF)(b.eB,{name:"expand"},{default:(0,i.k6)((()=>[o.showReactionOptions?((0,i.uX)(),(0,i.CE)("div",Le,[(0,i.bF)(r,{title:"Reaction IDs",itemList:o.reactionOptions.reactionIds},null,8,["itemList"]),(0,i.bF)(r,{title:"Reaction SMARTS",itemList:o.reactionOptions.reactionSmarts},null,8,["itemList"]),(0,i.Lk)("div",be,[ye,(0,i.Lk)("div",Me,(0,a.v_)(o.reactionOptions.min_yield)+"% - "+(0,a.v_)(o.reactionOptions.max_yield)+"%",1),(0,i.bF)(c,{baseClassName:"multi-range-slider",miin:0,max:100,step:1,ruler:!1,label:!1,minValue:o.reactionOptions.min_yield,maxValue:o.reactionOptions.max_yield,onInput:l.updateYield},null,8,["minValue","maxValue","onInput"])]),(0,i.Lk)("div",Ce,[xe,(0,i.Lk)("div",Oe,(0,a.v_)(o.reactionOptions.min_conversion)+"% - "+(0,a.v_)(o.reactionOptions.max_conversion)+"%",1),(0,i.bF)(c,{baseClassName:"multi-range-slider",miin:0,max:100,step:1,ruler:!1,label:!1,minValue:o.reactionOptions.min_conversion,maxValue:o.reactionOptions.max_conversion,onInput:l.updateConversion},null,8,["minValue","maxValue","onInput"])])])):(0,i.Q3)("",!0)])),_:1}),(0,i.Lk)("div",{class:(0,a.C4)(["options-title",o.showMechanoOptions?"":"closed"]),onClick:t[6]||(t[6]=e=>o.showMechanoOptions=!o.showMechanoOptions)},Se,2),(0,i.bF)(b.eB,{name:"expand"},{default:(0,i.k6)((()=>[o.showMechanoOptions?((0,i.uX)(),(0,i.CE)("div",_e,[(0,i.Lk)("div",Re,[Te,(0,i.Lk)("div",Pe,[(0,i.bo)((0,i.Lk)("select",{id:"treatment",type:"selected","onUpdate:modelValue":t[7]||(t[7]=e=>o.mechanoOptions.treatmentTypes=e),style:{width:"90%"},multiple:""},Ae,512),[[b.u1,o.mechanoOptions.treatmentTypes]])])]),(0,i.Lk)("div",De,[Be,(0,i.Lk)("div",Fe,[Ke,(0,i.bo)((0,i.Lk)("input",{id:"liquass",type:"checkbox","onUpdate:modelValue":t[8]||(t[8]=e=>o.mechanoOptions.liquidAssisted=e)},null,512),[[b.lH,o.mechanoOptions.liquidAssisted]])])])])):(0,i.Q3)("",!0)])),_:1}),(0,i.Lk)("div",{class:(0,a.C4)(["options-title",o.showDatasetOptions?"":"closed"]),onClick:t[9]||(t[9]=e=>o.showDatasetOptions=!o.showDatasetOptions)},qe,2),(0,i.bF)(b.eB,{name:"expand"},{default:(0,i.k6)((()=>[o.showDatasetOptions?((0,i.uX)(),(0,i.CE)("div",We,[(0,i.bF)(r,{title:"Dataset IDs",itemList:o.datasetOptions.datasetIds},null,8,["itemList"]),(0,i.bF)(r,{title:"DOIs",itemList:o.datasetOptions.DOIs},null,8,["itemList"])])):(0,i.Q3)("",!0)])),_:1}),$e,(0,i.Lk)("div",je,[(0,i.Lk)("div",Ue,[He,(0,i.bo)((0,i.Lk)("input",{id:"limit",type:"number",min:"0","onUpdate:modelValue":t[10]||(t[10]=e=>o.searchParams.limit=e)},null,512),[[b.Jo,o.searchParams.limit]])]),(0,i.Lk)("div",Je,[(0,i.Lk)("button",{onClick:t[11]||(t[11]=(...e)=>l.emitSearchOptions&&l.emitSearchOptions(...e))},Ye)])])]),o.showKetcherModal?((0,i.uX)(),(0,i.Wv)(u,{key:0,smiles:o.reagentOptions[o.ketcherModalSet][o.ketcherModalSmile].smileSmart,onUpdateSmiles:t[12]||(t[12]=e=>o.reagentOptions[o.ketcherModalSet][o.ketcherModalSmile].smileSmart=e),onCloseModal:t[13]||(t[13]=e=>o.showKetcherModal=!1)},null,8,["smiles"])):(0,i.Q3)("",!0)],64)}const Ze=e=>((0,i.Qi)("data-v-567bb920"),e=e(),(0,i.jt)(),e),et={class:"background"},tt={class:"modal",id:"ketcher_modal"},st={class:"modal-content"},it=Ze((()=>(0,i.Lk)("div",{class:"modal-body"},[(0,i.Lk)("iframe",{id:"ketcher-iframe",src:"/ketcher"})],-1))),at={class:"modal-footer"},nt={key:0,class:"modal-loading"};function ot(e,t,s,a,n,o){const l=(0,i.g2)("LoadingSpinner");return(0,i.uX)(),(0,i.CE)("div",et,[(0,i.Lk)("div",tt,[(0,i.Lk)("div",st,[it,(0,i.Lk)("div",at,[(0,i.Lk)("button",{type:"button",onClick:t[0]||(t[0]=e=>this.$emit("closeModal"))},"Cancel"),(0,i.Lk)("button",{type:"button",onClick:t[1]||(t[1]=e=>o.saveSmiles())},"Save")]),(0,i.bF)(b.eB,{name:"fade"},{default:(0,i.k6)((()=>[n.loading?((0,i.uX)(),(0,i.CE)("div",nt,[(0,i.bF)(l)])):(0,i.Q3)("",!0)])),_:1})])])])}var lt=s(8212),rt={components:{LoadingSpinner:lt.A},props:{smiles:String},data(){return{contWin:null,mutatedSmiles:"",loading:!0}},methods:{getKetcher(){const e=setInterval((()=>{this.contWin||document.getElementById("ketcher-iframe").contentWindow.ketcher&&(this.contWin=document.getElementById("ketcher-iframe").contentWindow,clearInterval(e),this.drawSmiles(),this.loading=!1)}),1e3)},drawSmiles(){if(this.mutatedSmiles){const e=new XMLHttpRequest;e.open("POST","/api/ketcher/molfile"),e.responseType="json",e.onload=function(){if(200===e.status){const t=e.response;document.getElementById("ketcher-iframe").contentWindow.ketcher.setMolecule(t)}},e.send(this.mutatedSmiles)}},async saveSmiles(){this.mutatedSmiles=await this.contWin.ketcher.getSmiles(),this.$emit("updateSmiles",this.mutatedSmiles),this.$emit("closeModal")}},mounted(){this.mutatedSmiles=this.smiles,this.getKetcher()}},ct=s(1241);const ut=(0,ct.A)(rt,[["render",ot],["__scopeId","data-v-567bb920"]]);var ht=ut;const dt=e=>((0,i.Qi)("data-v-e66538dc"),e=e(),(0,i.jt)(),e),mt={class:"item-list"},pt={class:"title"},vt={class:"list"},gt={class:"text"},kt={class:"delete"},Lt=["onClick"],bt=dt((()=>(0,i.Lk)("i",{class:"material-icons"},"delete",-1))),yt=[bt],Mt={class:"input"},Ct=dt((()=>(0,i.Lk)("i",{class:"material-icons"},"add",-1))),xt=dt((()=>(0,i.Lk)("span",null,"Add",-1))),Ot=[Ct,xt];function ft(e,t,s,n,o,l){return(0,i.uX)(),(0,i.CE)("div",mt,[(0,i.Lk)("div",pt,(0,a.v_)(s.title),1),(0,i.Lk)("div",vt,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(o.mutatedList,((e,t)=>((0,i.uX)(),(0,i.CE)(i.FK,null,[(0,i.Lk)("div",gt,(0,a.v_)(e),1),(0,i.Lk)("div",kt,[(0,i.Lk)("button",{onClick:e=>l.deleteItem(t)},yt,8,Lt)])],64)))),256))]),(0,i.Lk)("div",Mt,[(0,i.bo)((0,i.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>o.itemToAdd=e)},null,512),[[b.Jo,o.itemToAdd]]),(0,i.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>l.updateList&&l.updateList(...e))},Ot)])])}var wt={props:{title:String,itemList:Array},data(){return{mutatedList:[],itemToAdd:""}},methods:{updateList(){this.mutatedList.push(this.itemToAdd),this.itemToAdd="",this.$emit("update:itemList",this.mutatedList)},deleteItem(e){this.mutatedList.splice(e,1),this.$emit("update:itemList",this.mutatedList)}},mounted(){this.mutatedList=this.itemList||[]}};const St=(0,ct.A)(wt,[["render",ft],["__scopeId","data-v-e66538dc"]]);var _t=St;const Rt={class:"bar"},Tt=["min","max","step","value"],Pt={class:"caption"},Et={class:"min-caption"},It={class:"bar-inner"},Vt=["min","max","step","value"],Xt={class:"caption"},At={class:"max-caption"},Dt={key:0,class:"ruler"},Bt={key:1,class:"sub-ruler"},Ft={key:2,class:"labels"};function Kt(e,t,s,n,o,l){return(0,i.uX)(),(0,i.CE)("div",{class:(0,a.C4)([s.baseClassName,0===o.rangeMarginValue?"zero-ranage-margin":""]),onMousewheel:t[10]||(t[10]=(0,b.D$)(((...e)=>l.onMouseWheel&&l.onMouseWheel(...e)),["prevent","stop"]))},[(0,i.Lk)("div",Rt,[(0,i.Lk)("div",{class:"bar-left",style:(0,a.Tr)({width:l.barMin+"%"}),onClick:t[0]||(t[0]=(...e)=>l.onBarLeftClick&&l.onBarLeftClick(...e))},null,4),(0,i.Lk)("input",{class:"input-type-range input-type-range-min",type:"range",min:l.minimum,max:l.maximum,step:s.step,value:o.valueMin,onInput:t[1]||(t[1]=(0,b.D$)(((...e)=>l.onInputMinChange&&l.onInputMinChange(...e)),["stop","prevent"]))},null,40,Tt),(0,i.Lk)("div",{class:"thumb thumb-left",onMousedown:t[2]||(t[2]=(...e)=>l.onLeftThumbMousedown&&l.onLeftThumbMousedown(...e)),onTouchstart:t[3]||(t[3]=(...e)=>l.onLeftThumbMousedown&&l.onLeftThumbMousedown(...e))},[(0,i.Lk)("div",Pt,[(0,i.Lk)("span",Et,(0,a.v_)(s.minCaption||l.barMinVal),1)])],32),(0,i.Lk)("div",It,[(0,i.Lk)("div",{class:"bar-inner-left",onClick:t[4]||(t[4]=(...e)=>l.onInnerBarLeftClick&&l.onInnerBarLeftClick(...e))}),(0,i.Lk)("div",{class:"bar-inner-right",onClick:t[5]||(t[5]=(...e)=>l.onInnerBarRightClick&&l.onInnerBarRightClick(...e))})]),(0,i.Lk)("input",{class:"input-type-range input-type-range-max",type:"range",min:l.minimum,max:l.maximum,step:s.step,value:o.valueMax,onInput:t[6]||(t[6]=(0,b.D$)(((...e)=>l.onInputMaxChange&&l.onInputMaxChange(...e)),["stop","prevent"]))},null,40,Vt),(0,i.Lk)("div",{class:"thumb thumb-right",onMousedown:t[7]||(t[7]=(...e)=>l.onRightThumbMousedown&&l.onRightThumbMousedown(...e)),onTouchstart:t[8]||(t[8]=(...e)=>l.onRightThumbMousedown&&l.onRightThumbMousedown(...e))},[(0,i.Lk)("div",Xt,[(0,i.Lk)("span",At,(0,a.v_)(s.maxCaption||l.barMaxVal),1)])],32),(0,i.Lk)("div",{class:"bar-right",style:(0,a.Tr)({width:l.barMax+"%"}),onClick:t[9]||(t[9]=(...e)=>l.onBarRightClick&&l.onBarRightClick(...e))},null,4)]),s.ruler?((0,i.uX)(),(0,i.CE)("div",Dt,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(l.stepCount,(e=>((0,i.uX)(),(0,i.CE)("div",{key:e,class:"ruler-rule"})))),128))])):(0,i.Q3)("",!0),l.subStepCount?((0,i.uX)(),(0,i.CE)("div",Bt,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(l.subStepCount,(e=>((0,i.uX)(),(0,i.CE)("div",{key:e,class:"ruler-sub-rule"})))),128))])):(0,i.Q3)("",!0),s.label?((0,i.uX)(),(0,i.CE)("div",Ft,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(l.scaleLabels,(e=>((0,i.uX)(),(0,i.CE)("div",{class:"label",key:e},(0,a.v_)(e),1)))),128))])):(0,i.Q3)("",!0)],34)}var Nt={name:"MultiRangeSlider",props:{baseClassName:{type:String,default:"multi-range-slider"},min:{type:Number},max:{type:Number},minValue:{type:Number},maxValue:{type:Number},step:{type:Number,default:1},preventWheel:{type:Boolean,default:!1},ruler:{type:Boolean,default:!0},label:{type:Boolean,default:!0},labels:{type:Array},minCaption:{type:String},maxCaption:{type:String},rangeMargin:{type:Number}},data(){let e=this.labels||[],t=void 0===this.min?0:this.min,s=e.length?e.length-1:100,i=void 0===this.max?s:this.max,a=void 0===this.minValue?25:this.minValue;e.length&&void 0===this.minValue&&(a=1);let n=this.maxValue||75;if(e.length&&void 0===this.maxValue&&(n=e.length-2),i<=t)throw new Error("Invalid props min or max");if(a>n)throw new Error("Invalid props minValue or maxValue");let o=void 0===this.rangeMargin?this.step:this.rangeMargin,l=o%this.step;return l&&(o=o+this.step-l),{valueMin:a<t?t:a,valueMax:n>i?i:n,interVal:null,startX:null,mouseMoveCounter:null,barBox:null,barValue:0,rangeMarginValue:o}},methods:{onBarLeftClick(){this.valueMin-this.step>=this.minimum?this.valueMin-=this.step:this.valueMin=this.minimum},onInnerBarLeftClick(){this.valueMin+this.rangeMarginValue<this.valueMax&&(this.valueMin+=this.step)},onBarRightClick(){this.valueMax+this.step<=this.maximum?this.valueMax+=this.step:this.valueMax=this.maximum},onInnerBarRightClick(){this.valueMax-this.rangeMarginValue>this.valueMin&&(this.valueMax-=this.step)},onInputMinChange(e){let t=parseFloat(e.target.value);t<=this.valueMax-this.rangeMarginValue&&t>=this.minimum?this.valueMin=t:e.target.value=this.valueMin},onInputMaxChange(e){let t=parseFloat(e.target.value);t>=this.valueMin+this.rangeMarginValue&&t<=this.maximum?this.valueMax=t:e.target.value=this.valueMax},onLeftThumbMousedown(e){if(e.preventDefault(),this.startX=e.clientX,"touchstart"===e.type){if(1!==e.touches.length)return;this.startX=e.touches[0].clientX}this.mouseMoveCounter=0,this.barValue=this.valueMin,this.barBox=e.target.parentNode.getBoundingClientRect(),document.addEventListener("mousemove",this.onLeftThumbMousemove),document.addEventListener("mouseup",this.onLeftThumbMouseup),document.addEventListener("touchmove",this.onLeftThumbMousemove),document.addEventListener("touchend",this.onLeftThumbMouseup)},onLeftThumbMousemove(e){this.mouseMoveCounter++;let t=e.clientX;"touchmove"===e.type&&(t=e.touches[0].clientX);let s=t-this.startX,i=s/this.barBox.width,a=this.barValue+(this.maximum-this.minimum)*i,n=a%this.step;a-=n,a<this.minimum?a=this.minimum:a>this.valueMax-this.rangeMarginValue&&(a=this.valueMax-this.rangeMarginValue),this.valueMin=a},onLeftThumbMouseup(){document.removeEventListener("mousemove",this.onLeftThumbMousemove),document.removeEventListener("mouseup",this.onLeftThumbMouseup),document.removeEventListener("touchmove",this.onLeftThumbMousemove),document.removeEventListener("touchend",this.onLeftThumbMouseup)},onRightThumbMousedown(e){if(e.preventDefault(),this.startX=e.clientX,"touchstart"===e.type){if(1!==e.touches.length)return;this.startX=e.touches[0].clientX}this.mouseMoveCounter=0,this.barValue=this.valueMax,this.barBox=e.target.parentNode.getBoundingClientRect(),document.addEventListener("mousemove",this.onRightThumbMousemove),document.addEventListener("mouseup",this.onRightThumbMouseup),document.addEventListener("touchmove",this.onRightThumbMousemove),document.addEventListener("touchend",this.onRightThumbMouseup)},onRightThumbMousemove(e){this.mouseMoveCounter++;let t=e.clientX;"touchmove"===e.type&&(t=e.touches[0].clientX);let s=t-this.startX,i=s/this.barBox.width,a=this.barValue+(this.maximum-this.minimum)*i,n=a%this.step;a-=n,a<this.valueMin+this.rangeMarginValue?a=this.valueMin+this.rangeMarginValue:a>this.maximum&&(a=this.maximum),this.valueMax=a},onRightThumbMouseup(){document.removeEventListener("mousemove",this.onRightThumbMousemove),document.removeEventListener("mouseup",this.onRightThumbMouseup),document.removeEventListener("touchmove",this.onRightThumbMousemove),document.removeEventListener("touchend",this.onRightThumbMouseup)},onMouseWheel(e){if(!0===this.preventWheel)return;if(!e.shiftKey&&!e.ctrlKey)return;let t=this.step;e.deltaY<0&&(t=-t),e.shiftKey&&e.ctrlKey?this.valueMin+t>=this.minimum&&this.valueMax+t<=this.maximum&&(this.valueMin=this.valueMin+t,this.valueMax=this.valueMax+t):e.ctrlKey?(t=this.valueMax+t,t<this.valueMin+this.rangeMarginValue?t=this.valueMin+this.rangeMarginValue:t>this.maximum&&(t=this.maximum),this.valueMax=t):e.shiftKey&&(t=this.valueMin+t,t<this.minimum?t=this.minimum:t>this.valueMax-this.rangeMarginValue&&(t=this.valueMax-this.rangeMarginValue),this.valueMin=t)},triggerInput(){let e=0;this.step.toString().includes(".")&&(e=2);let t={min:this.minimum,max:this.maximum,minValue:parseFloat(this.valueMin.toFixed(e)),maxValue:parseFloat(this.valueMax.toFixed(e))};this.$emit("input",t)}},computed:{minimum(){return void 0===this.min?0:this.min},maximum(){let e=this.labels||[],t=e.length?e.length-1:100;return void 0===this.max?t:this.max},stepCount(){let e=this.labels||[];return e.length?e.length-1:Math.floor((this.maximum-this.minimum)/this.step)},subStepCount(){let e=this.labels||[];return e.length&&this.step>1?(this.maximum-this.minimum)/this.step:0},barMin(){let e=(this.valueMin-this.minimum)/(this.maximum-this.minimum)*100;return e},barMax(){let e=100-(this.valueMax-this.minimum)/(this.maximum-this.minimum)*100;return e},barMinVal(){let e=0;return this.step.toString().includes(".")&&(e=2),(this.valueMin||0).toFixed(e)},barMaxVal(){let e=0;return this.step.toString().includes(".")&&(e=2),(this.valueMax||100).toFixed(e)},scaleLabels(){let e=this.labels||[];return 0===e.length&&(e=[],e.push(this.minimum),e.push(this.maximum)),e}},watch:{valueMin(){this.triggerInput()},valueMax(){this.triggerInput()},minValue(e){this.valueMin=e<this.minimum?this.minimum:e},maxValue(e){this.valueMax=e>this.maximum?this.maximum:e}},mounted(){}};const Qt=(0,ct.A)(Nt,[["render",Kt]]);var qt=Qt,Wt={components:{ModalKetcher:ht,SearchItemList:_t,MultiRangeSlider:qt},emits:["searchOptions"],data(){return{test:null,showReagentOptions:!1,showReactionOptions:!1,showDatasetOptions:!1,showMechanoOptions:!1,reagentOptions:{reactants:[],products:[],matchMode:"exact",useStereochemistry:!1,similarityThreshold:.5},reactionOptions:{reactionIds:[],reactionSmarts:[],min_yield:50,max_yield:100,min_conversion:50,max_conversion:100},datasetOptions:{datasetIds:[],DOIs:[]},mechanoOptions:{treatmentType:[],liquidAssisted:!1},searchParams:{limit:100},showKetcherModal:!1,ketcherModalSmile:0,ketcherModalSet:"reactants",matchModes:["exact","similar","substructure"]}},computed:{defaultQuery(){return this.$route.query},simThresholdDisplay(){let e="";const t=this.reagentOptions.similarityThreshold.toString();return t.length<2?e=".00":t.length<4&&(e="0"),t+e}},methods:{openKetcherModal(e,t){this.ketcherModalSmile=t,this.ketcherModalSet=e,this.showKetcherModal=!0},emitSearchOptions(){const e=[...this.reagentOptions.reactants,...this.reagentOptions.products].map((e=>({...e,matchMode:this.reagentOptions.matchMode}))),t={reagent:{reagents:e,useStereochemistry:this.reagentOptions.useStereochemistry,similarityThreshold:this.reagentOptions.similarityThreshold},reaction:this.reactionOptions,dataset:this.datasetOptions,general:this.searchParams,mechano:this.mechanoOptions};this.$emit("searchOptions",t)},setDefaultValues(){const e=this.defaultQuery;e.component?.length&&(Array.isArray(e.component)?e.component.forEach((e=>{this.addCompToOptions(e)})):this.addCompToOptions(e.component),this.reagentOptions.useStereochemistry=e.use_stereochemistry||!1,this.reagentOptions.similarityThreshold=Number(e.similarity)||.5,this.showReagentOptions=!0),this.datasetOptions.datasetIds=e.dataset_ids?.split(",")||[],this.datasetOptions.DOIs=e.dois?.split(",")||[],(this.datasetOptions.datasetIds.length||this.datasetOptions.DOIs.length)&&(this.showDatasetOptions=!0),this.reactionOptions.reactionIds=e.reaction_ids?.split(",")||[],this.reactionOptions.reactionSmarts=e.reaction_smarts?.split(",")||[],this.reactionOptions.min_yield=Number(e.min_yield)||0,this.reactionOptions.max_yield=Number(e.max_yield)||100,this.reactionOptions.min_conversion=Number(e.min_conversion)||0,this.reactionOptions.max_conversion=Number(e.max_conversion)||100,(this.reactionOptions.reactionIds.length||this.reactionOptions.reactionSmarts.length||50!==this.reactionOptions.yield||50!==this.reactionOptions.conversion)&&(this.showReactionOptions=!0),this.mechanoOptions.treatmentTypes=e.treatment_type?.split(",")||[],this.mechanoOptions.liquidAssisted=e.liquid_assisted||!1,(this.mechanoOptions.treatmentTypes||this.mechanoOptions.liquidAssisted)&&(this.showMechanoOptions=!0),this.searchParams.limit=e.limit||100},addCompToOptions(e){const t=e.split(";"),s="input"==t[1]?"reactants":"products";this.reagentOptions.matchMode=t[2],this.reagentOptions[s].push({smileSmart:t[0].replaceAll("%3D","="),source:t[1],matchMode:t[2]})},updateYield(e){this.reactionOptions.min_yield=e.minValue,this.reactionOptions.max_yield=e.maxValue},updateConversion(e){this.reactionOptions.min_conversion=e.minValue,this.reactionOptions.max_conversion=e.maxValue},updateMechTreatment(e){this.mechanoOptions.treatmentTypes=e.treatment_type,this.mechanoOptions.liquidAssisted=e.liquid_assisted}},mounted(){this.setDefaultValues()}};const $t=(0,ct.A)(Wt,[["render",ze],["__scopeId","data-v-5ed4ebb8"]]);var jt=$t;const Ut={class:"search-results-main"},Ht={class:"action-button-holder"},Jt=["disabled"],Gt={key:0,class:"view-selected-container"};function Yt(e,t,s,n,o,l){const r=(0,i.g2)("CopyButton"),c=(0,i.g2)("ReactionCard"),u=(0,i.g2)("EntityTable"),h=(0,i.g2)("DownloadResults");return(0,i.uX)(),(0,i.CE)("div",Ut,[o.formattedResults.length?((0,i.uX)(),(0,i.Wv)(u,{key:0,tableData:o.formattedResults,title:"Search Results",displaySearch:!1},{default:(0,i.k6)((({entities:e})=>[(0,i.Lk)("div",Ht,[(0,i.bF)(r,{textToCopy:l.fullUrl,icon:"share",buttonText:"Shareable Link"},null,8,["textToCopy"]),(0,i.Lk)("button",{disabled:!o.formattedResults.length,onClick:t[0]||(t[0]=e=>o.showDownloadResults=!0)},"Download All Search Results",8,Jt)]),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e,(e=>((0,i.uX)(),(0,i.Wv)(c,{reaction:e,isSelectable:!0,isSelected:o.selectedReactions.includes(e.reaction_id),onClickedSelect:l.updateSelectedReactions},null,8,["reaction","isSelected","onClickedSelect"])))),256))])),_:1},8,["tableData"])):(0,i.Q3)("",!0),(0,i.bF)(b.eB,{name:"fade"},{default:(0,i.k6)((()=>[o.selectedReactions.length?((0,i.uX)(),(0,i.CE)("div",Gt,[(0,i.Lk)("div",{class:"view-selected-button",onClick:t[1]||(t[1]=(...e)=>l.goToViewSelected&&l.goToViewSelected(...e))},"View "+(0,a.v_)(o.selectedReactions.length)+" selected reactions",1)])):(0,i.Q3)("",!0)])),_:1}),(0,i.bF)(h,{reactionIds:o.formattedResults.map((e=>e.reaction_id)),showDownloadResults:o.showDownloadResults,onHideDownloadResults:t[2]||(t[2]=e=>o.showDownloadResults=!1)},null,8,["reactionIds","showDownloadResults"])])}var zt=s(2262),Zt=s(3726),es=s(5765),ts=s(9554),ss={props:{searchResults:Array},components:{EntityTable:zt.A,LoadingSpinner:lt.A,CopyButton:es.A,ReactionCard:Zt.A,DownloadResults:ts.A},data(){return{formattedResults:[],selectedReactions:[],showDownloadResults:!1}},computed:{fullUrl(){return window.location.href}},methods:{updateSelectedReactions(e){if(e.target.checked)this.selectedReactions.push(e.target.value);else{let t=this.selectedReactions.indexOf(e.target.value);-1!==t&&this.selectedReactions.splice(t,1)}},goToViewSelected(){this.$store.commit("setStoredSet",{query:window.location.search,reactions:this.selectedReactions}),this.$router.push({name:"selected-set",query:{reaction_ids:this.selectedReactions}})}},async mounted(){this.formattedResults=this.searchResults,window.location.search==this.$store.state.storedSet?.query&&(this.selectedReactions=this.$store.state.storedSet.reactions)}};const is=(0,ct.A)(ss,[["render",Yt],["__scopeId","data-v-4fae3f8c"]]);var as=is,ns=s(2639),os=s.n(ns),ls=s(7753),rs={components:{SearchOptions:jt,SearchResults:as,LoadingSpinner:lt.A},watch:{"$route.query":{handler(){this.getSearchResults()},deep:!0}},data(){return{searchResults:[],queryParams:"",searchParams:{},loading:!0,urlQuery:"",showOptions:!1}},methods:{async getSearchResults(){this.loading=!0,this.urlQuery=window.location.search;try{const e=await fetch(`/api/query${this.urlQuery}`,{method:"GET"});this.searchResults=await e.json(),this.searchResults.forEach((e=>{const t=(0,ls.A)(e.proto);e.data=os().Reaction.deserializeBinary(t).toObject()})),this.loading=!1}catch(e){console.log(e),this.searchResults=[],this.loading=!1}},updateSearchOptions(e){e.reagent.reagents.length?(this.searchParams["component"]=[],e.reagent.reagents.forEach((e=>{this.searchParams["component"].push(`${e.smileSmart};${e.source};${e.matchMode}`)})),this.searchParams["use_stereochemistry"]=e.reagent.useStereochemistry,this.searchParams["similarity"]=e.reagent.similarityThreshold):this.searchParams["component"]=[],e.mechano.treatmentTypes.length?this.searchParams["treatment_type"]=e.mechano.treatmentTypes.join(","):delete this.searchParams["treatment_type"],e.mechano.liquidAssisted?this.searchParams["liquid_assisted"]=e.mechano.liquidAssisted:delete this.searchParams["liquid_assisted"],e.dataset.DOIs.length?this.searchParams["dois"]=e.dataset.DOIs.join(","):delete this.searchParams["dois"],e.dataset.datasetIds.length?this.searchParams["dataset_ids"]=e.dataset.datasetIds.join(","):delete this.searchParams["dataset_ids"],e.dataset.DOIs.length?this.searchParams["dois"]=e.dataset.DOIs.join(","):delete this.searchParams["dois"],e.reaction.reactionIds.length?this.searchParams["reaction_ids"]=e.reaction.reactionIds.join(","):delete this.searchParams["reaction_ids"],e.reaction.reactionSmarts.length?this.searchParams["reaction_smarts"]=e.reaction.reactionSmarts.join(","):delete this.searchParams["reaction_smarts"],0!==e.reaction.min_yield||100!==e.reaction.max_yield?(this.searchParams["min_yield"]=e.reaction.min_yield,this.searchParams["max_yield"]=e.reaction.max_yield):(delete this.searchParams["min_yield"],delete this.searchParams["max_yield"]),0!==e.reaction.min_conversion||100!==e.reaction.max_conversion?(this.searchParams["min_conversion"]=e.reaction.min_conversion,this.searchParams["max_conversion"]=e.reaction.max_conversion):(delete this.searchParams["min_conversion"],delete this.searchParams["max_conversion"]),this.searchParams["limit"]=e.general.limit||100,this.$router.push({name:"search",query:this.searchParams})}},mounted(){this.getSearchResults()}};const cs=(0,ct.A)(rs,[["render",L],["__scopeId","data-v-df10f4ee"]]);var us=cs}}]);
//# sourceMappingURL=548.7d314e37.js.map