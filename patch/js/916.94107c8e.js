"use strict";(self["webpackChunkapp"]=self["webpackChunkapp"]||[]).push([[916],{8212:function(e,a,t){t.d(a,{A:function(){return p}});var s=t(6768),i=t(5130);const n=e=>((0,s.Qi)("data-v-6847655e"),e=e(),(0,s.jt)(),e),l={class:"spinner-main"},r=n((()=>(0,s.Lk)("div",{class:"loader-ring"},[(0,s.Lk)("div"),(0,s.Lk)("div"),(0,s.Lk)("div"),(0,s.Lk)("div")],-1)));function o(e,a,t,n,o,d){return(0,s.uX)(),(0,s.CE)("div",l,[(0,s.bF)(i.eB,{name:"fade"},{default:(0,s.k6)((()=>[r])),_:1})])}var d={name:"LoadingSpinner",data(){return{}}},u=t(1241);const c=(0,u.A)(d,[["render",o],["__scopeId","data-v-6847655e"]]);var p=c},916:function(e,a,t){t.r(a),t.d(a,{default:function(){return re}});var s=t(6768),i=t(5130),n=t(4232);const l=e=>((0,s.Qi)("data-v-75c1a124"),e=e(),(0,s.jt)(),e),r={class:"main-contribute"},o={key:0,class:"loading"},d={key:0,class:"contribute-menu"},u={class:"title"},c={class:"contribute-container"},p={class:"tabs"},m=["onClick"],h={key:0,class:"get-started"},v={class:"copy"},f=l((()=>(0,s.Lk)("code",null,".pbtxt",-1))),b=l((()=>(0,s.Lk)("code",null,"construct_dataset.py",-1)));function g(e,a,t,l,g,k){const L=(0,s.g2)("LoadingSpinner"),F=(0,s.g2)("All"),y=(0,s.g2)("Upload");return(0,s.uX)(),(0,s.CE)("div",r,[(0,s.bF)(i.eB,{name:"fade"},{default:(0,s.k6)((()=>[g.loading?((0,s.uX)(),(0,s.CE)("div",o,[(0,s.bF)(L)])):(0,s.Q3)("",!0)])),_:1}),(0,s.bF)(i.eB,{name:"fade"},{default:(0,s.k6)((()=>[g.loading?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",d,[(0,s.Lk)("div",u,(0,n.v_)(g.activeTab),1),(0,s.Lk)("div",c,[(0,s.Lk)("div",p,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(g.tabs,(e=>((0,s.uX)(),(0,s.CE)("div",{class:(0,n.C4)(["tab",g.activeTab==e?"selected":""]),onClick:a=>g.activeTab=e},(0,n.v_)(e),11,m)))),256))]),(0,s.bF)(i.eB,{name:"fade"},{default:(0,s.k6)((()=>["Introduction"==g.activeTab?((0,s.uX)(),(0,s.CE)("div",h,[(0,s.Lk)("div",v,[(0,s.eW)("We have adapted the ORD submission template to support a single-file workflow."),(0,s.bF)(F,null,{default:(0,s.k6)((()=>[(0,s.eW)("submissions are driven by a single spreadsheet file which is compiled down to a  ")])),_:1}),f,(0,s.eW)("  file with the  "),b,(0,s.eW)("  script in the main repository.")])])):(0,s.Q3)("",!0)])),_:1}),(0,s.bF)(i.eB,{name:"fade"},{default:(0,s.k6)((()=>["Upload"==g.activeTab?((0,s.uX)(),(0,s.Wv)(y,{key:0})):(0,s.Q3)("",!0)])),_:1})])]))])),_:1})])}var k=t(8212);const L=e=>((0,s.Qi)("data-v-48ecb63a"),e=e(),(0,s.jt)(),e),F={class:"enumerate"},y=L((()=>(0,s.Lk)("div",{class:"subtitle"},"Upload files for enumeration:",-1))),_={class:"file-picker"},C={class:"input"},w=L((()=>(0,s.Lk)("label",{for:"template"},"Template filename:",-1))),D={class:"input"},E=L((()=>(0,s.Lk)("label",{for:"spreadsheet"},"Spreadsheet filename:",-1))),T={class:"submit"},U=(0,s.Fv)('<div class="copy" data-v-48ecb63a>You can use a Reaction template to enumerate a Dataset based on a spreadsheet of values. For more information, see the <a href="https://docs.open-reaction-database.org/en/latest/guides/templates.html" target="_blank" data-v-48ecb63a>documentation</a>.</div><div class="copy" data-v-48ecb63a><b data-v-48ecb63a>NOTE:</b> Large dataset enumerations (thousands of reactions) may result in a browser timeout. If this happens, please send an email to <a href="mailto:help@open-reaction-database.org" target="_blank" data-v-48ecb63a>help@open-reaction-database.org</a> and attach your template and spreadsheet files. Alternatively, you may use the <a href="https://github.com/Open-Reaction-Database/ord-schema/blob/main/ord_schema/scripts/enumerate_dataset.py" target="_blank" data-v-48ecb63a>programmatic interface</a> to enumerate the dataset locally.</div>',2);function X(e,a,t,i,n,l){return(0,s.uX)(),(0,s.CE)("div",F,[y,(0,s.Lk)("div",_,[(0,s.Lk)("div",C,[w,(0,s.Lk)("input",{id:"template",type:"file",accept:".pbtxt",onChange:a[0]||(a[0]=e=>l.setFile(e,"template"))},null,32)]),(0,s.Lk)("div",D,[E,(0,s.Lk)("input",{id:"spreadsheet",type:"file",accept:".csv,.xls,.xlsx",onChange:a[1]||(a[1]=e=>l.setFile(e,"spreadsheet"))},null,32)])]),(0,s.Lk)("div",T,[(0,s.Lk)("button",{id:"enumerate_submit",onClick:a[2]||(a[2]=(...e)=>l.submitEnumerate&&l.submitEnumerate(...e))},"Submit Enumeration Upload")]),U])}var A={data(){return{enumerateFiles:{template:{name:null,loading:!1,value:null},spreadsheet:{name:null,loading:!1,value:null}}}},methods:{async setFile(e,a){const t=e.target.files||e.dataTransfer.files;if(!t.length)return console.error("No file");this.enumerateFiles[a].loading=!0,this.enumerateFiles[a].name=t[0].name;const s=new FileReader;s.onload=e=>{this.enumerateFiles[a].value=e.target.result,this.enumerateFiles[a].loading=!1},"template"==a?s.readAsText(t[0]):"spreadsheet"==a&&s.readAsDataURL(t[0])},submitEnumerate(){if(this.enumerateFiles.template.loading||this.enumerateFiles.spreadsheet.loading)return alert("Files are still processing. Please try again in a moment.");if(!this.enumerateFiles.template.value||!this.enumerateFiles.spreadsheet.value)return alert("You must upload a file for the template and spreadsheet before submitting.");const e=new XMLHttpRequest;e.open("POST","/editor-api/dataset/enumerate"),e.onload=function(){200===e.status?location.reload():(alert(`Error: ${e.response}`),console.error(e.response))},e.send(JSON.stringify({template_string:this.enumerateFiles.template.value,spreadsheet_data:this.enumerateFiles.spreadsheet.value,spreadsheet_name:this.enumerateFiles.spreadsheet.name}))}}},S=t(1241);const I=(0,S.A)(A,[["render",X],["__scopeId","data-v-48ecb63a"]]);var N=I;const x=e=>((0,s.Qi)("data-v-0eae3a66"),e=e(),(0,s.jt)(),e),Q={class:"upload"},R=x((()=>(0,s.Lk)("div",{class:"subtitle"},"Upload dataset file:",-1))),W={class:"file-picker"},j={class:"input"},q=x((()=>(0,s.Lk)("label",{for:"upload"},"Dataset filename:",-1))),B={class:"submit"},O=x((()=>(0,s.Lk)("div",{class:"copy"},[(0,s.eW)("Choose a  "),(0,s.Lk)("code",null,".pbtxt"),(0,s.eW)("  file compiled with the  "),(0,s.Lk)("code",null,"construct_dataset.py"),(0,s.eW)("  script in the  "),(0,s.Lk)("a",{href:"https://github.com/Center-for-Mechanical-Control-of-Chem/cmccdb-schema"},"cmccdb-schema repository")],-1)));function P(e,a,t,i,n,l){return(0,s.uX)(),(0,s.CE)("div",Q,[R,(0,s.Lk)("div",W,[(0,s.Lk)("div",j,[q,(0,s.Lk)("input",{id:"template",type:"file",accept:".pbtxt,.pb",onChange:a[0]||(a[0]=e=>l.setFile(e))},null,32)])]),(0,s.Lk)("div",B,[(0,s.Lk)("button",{id:"upload-submit",onClick:a[1]||(a[1]=(...e)=>l.submitUpload&&l.submitUpload(...e))},"Submit Upload")]),O])}var M={data(){return{uploadFile:{name:null,loading:!1,value:null}}},methods:{async setFile(e){const a=e.target.files||e.dataTransfer.files;if(!a.length)return console.error("No file");this.uploadFile.loading=!0,this.uploadFile.name=a[0].name;const t=new FileReader;t.onload=e=>{this.uploadFile.value=e.target.result,this.uploadFile.loading=!1},t.readAsArrayBuffer(a[0])},submitUpload(){if(this.uploadFile.loading)return alert("Files are still processing. Please try again in a moment.");if(!this.uploadFile.value)return alert("You must upload a file for the dataset before submitting.");const e=new XMLHttpRequest;e.open("POST",`/editor-api/dataset/${this.uploadFile.name}/upload`);const a=this.uploadFile.value;e.onload=()=>{200===e.status?location.reload():alert("Error: "+e.response)},e.onerror=()=>{alert("Error: request failed (possibly due to timeout)")},e.send(a)}}};const $=(0,S.A)(M,[["render",P],["__scopeId","data-v-0eae3a66"]]);var H=$;const Y=e=>((0,s.Qi)("data-v-4530c0b0"),e=e(),(0,s.jt)(),e),J={class:"create"},V=Y((()=>(0,s.Lk)("div",{class:"subtitle"},"Create dataset:",-1))),G={class:"file-picker"},K={class:"input"},z=Y((()=>(0,s.Lk)("label",{for:"new-dataset-name"},"Dataset name:",-1))),Z={class:"submit"},ee=Y((()=>(0,s.Lk)("div",{class:"copy"},"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec tincidunt eros eget magna venenatis, nec volutpat justo ornare. Praesent mauris enim, dignissim nec posuere ut, mollis at lacus. Phasellus ut ultricies arcu, ultrices efficitur enim. Donec pharetra turpis nulla, id elementum felis fermentum sit amet. In id imperdiet sapien. Quisque vulputate odio eget ex aliquet aliquam. Vestibulum a metus magna.",-1)));function ae(e,a,t,n,l,r){return(0,s.uX)(),(0,s.CE)("div",J,[V,(0,s.Lk)("div",G,[(0,s.Lk)("div",K,[z,(0,s.bo)((0,s.Lk)("input",{id:"new-dataset-name",type:"text","onUpdate:modelValue":a[0]||(a[0]=e=>l.newDatasetName=e)},null,512),[[i.Jo,l.newDatasetName]])])]),(0,s.Lk)("div",Z,[(0,s.Lk)("button",{id:"create-dataset",onClick:a[1]||(a[1]=(...e)=>r.createDataset&&r.createDataset(...e))},"Create Dataset")]),ee])}var te={data(){return{loading:!0,newDatasetName:null}},methods:{async getDatasets(){const e=await fetch("/editor-api/getDatasetsByUser/ef4a7184f6bf4d2da99d8e08b36882c0");console.log("res.json",e)},createDataset(){if(!this.newDatasetName)return alert("Enter a name for the new dataset.");const e=new XMLHttpRequest;e.datasetName=this.newDatasetName,e.open("POST",`/editor-api/dataset/${this.newDatasetName}/new`),e.onload=function(){409===e.status&&alert(`Error: Dataset "${this.datasetName}" already exists`)},e.send()}},mounted(){this.getDatasets()}};const se=(0,S.A)(te,[["render",ae],["__scopeId","data-v-4530c0b0"]]);var ie=se,ne={components:{LoadingSpinner:k.A,Enumerate:N,Upload:H,Datasets:ie},data(){return{loading:!0,tabs:["Introduction","Upload"],activeTab:"Upload"}},computed:{},methods:{},async mounted(){const e=localStorage.getItem("notFirstTime");e||(localStorage.setItem("notFirstTime","false"),this.activeTab="Get Started"),this.loading=!1}};const le=(0,S.A)(ne,[["render",g],["__scopeId","data-v-75c1a124"]]);var re=le}}]);
//# sourceMappingURL=916.94107c8e.js.map