"use strict";(self["webpackChunkapp"]=self["webpackChunkapp"]||[]).push([[992],{6466:function(e,a,t){t.d(a,{A:function(){return u}});var s=t(6768),i=t(5130);const n={class:"spinner-main"};function l(e,a,t,l,o,r){return(0,s.uX)(),(0,s.CE)("div",n,[(0,s.bF)(i.eB,{name:"fade"},{default:(0,s.k6)((()=>a[0]||(a[0]=[(0,s.Lk)("div",{class:"loader-ring"},[(0,s.Lk)("div"),(0,s.Lk)("div"),(0,s.Lk)("div"),(0,s.Lk)("div")],-1)]))),_:1})])}var o={name:"LoadingSpinner",data(){return{}}},r=t(1241);const d=(0,r.A)(o,[["render",l],["__scopeId","data-v-da99072c"]]);var u=d},4992:function(e,a,t){t.r(a),t.d(a,{default:function(){return K}});var s=t(6768),i=t(5130),n=t(4232);const l={class:"main-contribute"},o={key:0,class:"loading"},r={key:0,class:"contribute-menu"},d={class:"title"},u={class:"contribute-container"},c={class:"tabs"},p=["onClick"],m={key:0,class:"get-started"},f={class:"copy"};function h(e,a,t,h,v,b){const g=(0,s.g2)("LoadingSpinner"),k=(0,s.g2)("All"),L=(0,s.g2)("Upload"),F=(0,s.g2)("Reconfigure");return(0,s.uX)(),(0,s.CE)("div",l,[(0,s.bF)(i.eB,{name:"fade"},{default:(0,s.k6)((()=>[v.loading?((0,s.uX)(),(0,s.CE)("div",o,[(0,s.bF)(g)])):(0,s.Q3)("",!0)])),_:1}),(0,s.bF)(i.eB,{name:"fade"},{default:(0,s.k6)((()=>[v.loading?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",r,[(0,s.Lk)("div",d,(0,n.v_)(v.activeTab),1),(0,s.Lk)("div",u,[(0,s.Lk)("div",c,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(v.tabs,(e=>((0,s.uX)(),(0,s.CE)("div",{class:(0,n.C4)(["tab",v.activeTab==e?"selected":""]),onClick:a=>v.activeTab=e},(0,n.v_)(e),11,p)))),256))]),(0,s.bF)(i.eB,{name:"fade"},{default:(0,s.k6)((()=>["Introduction"==v.activeTab?((0,s.uX)(),(0,s.CE)("div",m,[(0,s.Lk)("div",f,[a[1]||(a[1]=(0,s.eW)("We have adapted the ORD submission template to support a single-file workflow.")),(0,s.bF)(k,null,{default:(0,s.k6)((()=>a[0]||(a[0]=[(0,s.eW)("submissions are driven by a single spreadsheet file which is compiled down to a  ")]))),_:1}),a[2]||(a[2]=(0,s.Lk)("code",null,".pbtxt",-1)),a[3]||(a[3]=(0,s.eW)("  file with the  ")),a[4]||(a[4]=(0,s.Lk)("code",null,"construct_dataset.py",-1)),a[5]||(a[5]=(0,s.eW)("  script in the main repository."))])])):(0,s.Q3)("",!0)])),_:1}),(0,s.bF)(i.eB,{name:"fade"},{default:(0,s.k6)((()=>["Upload"==v.activeTab?((0,s.uX)(),(0,s.Wv)(L,{key:0})):(0,s.Q3)("",!0)])),_:1}),(0,s.bF)(i.eB,{name:"fade"},{default:(0,s.k6)((()=>["Reconfigure"==v.activeTab?((0,s.uX)(),(0,s.Wv)(F,{key:0})):(0,s.Q3)("",!0)])),_:1})])]))])),_:1})])}var v=t(6466);const b={class:"enumerate"},g={class:"file-picker"},k={class:"input"},L={class:"input"},F={class:"submit"};function y(e,a,t,i,n,l){return(0,s.uX)(),(0,s.CE)("div",b,[a[5]||(a[5]=(0,s.Lk)("div",{class:"subtitle"},"Upload files for enumeration:",-1)),(0,s.Lk)("div",g,[(0,s.Lk)("div",k,[a[3]||(a[3]=(0,s.Lk)("label",{for:"template"},"Template filename:",-1)),(0,s.Lk)("input",{id:"template",type:"file",accept:".pbtxt",onChange:a[0]||(a[0]=e=>l.setFile(e,"template"))},null,32)]),(0,s.Lk)("div",L,[a[4]||(a[4]=(0,s.Lk)("label",{for:"spreadsheet"},"Spreadsheet filename:",-1)),(0,s.Lk)("input",{id:"spreadsheet",type:"file",accept:".csv,.xls,.xlsx",onChange:a[1]||(a[1]=e=>l.setFile(e,"spreadsheet"))},null,32)])]),(0,s.Lk)("div",F,[(0,s.Lk)("button",{id:"enumerate_submit",onClick:a[2]||(a[2]=(...e)=>l.submitEnumerate&&l.submitEnumerate(...e))},"Submit Enumeration Upload")]),a[6]||(a[6]=(0,s.Fv)('<div class="copy" data-v-48ecb63a>You can use a Reaction template to enumerate a Dataset based on a spreadsheet of values. For more information, see the <a href="https://docs.open-reaction-database.org/en/latest/guides/templates.html" target="_blank" data-v-48ecb63a>documentation</a>.</div><div class="copy" data-v-48ecb63a><b data-v-48ecb63a>NOTE:</b> Large dataset enumerations (thousands of reactions) may result in a browser timeout. If this happens, please send an email to <a href="mailto:help@open-reaction-database.org" target="_blank" data-v-48ecb63a>help@open-reaction-database.org</a> and attach your template and spreadsheet files. Alternatively, you may use the <a href="https://github.com/Open-Reaction-Database/ord-schema/blob/main/ord_schema/scripts/enumerate_dataset.py" target="_blank" data-v-48ecb63a>programmatic interface</a> to enumerate the dataset locally.</div>',2))])}var _={data(){return{enumerateFiles:{template:{name:null,loading:!1,value:null},spreadsheet:{name:null,loading:!1,value:null}}}},methods:{async setFile(e,a){const t=e.target.files||e.dataTransfer.files;if(!t.length)return console.error("No file");this.enumerateFiles[a].loading=!0,this.enumerateFiles[a].name=t[0].name;const s=new FileReader;s.onload=e=>{this.enumerateFiles[a].value=e.target.result,this.enumerateFiles[a].loading=!1},"template"==a?s.readAsText(t[0]):"spreadsheet"==a&&s.readAsDataURL(t[0])},submitEnumerate(){if(this.enumerateFiles.template.loading||this.enumerateFiles.spreadsheet.loading)return alert("Files are still processing. Please try again in a moment.");if(!this.enumerateFiles.template.value||!this.enumerateFiles.spreadsheet.value)return alert("You must upload a file for the template and spreadsheet before submitting.");const e=new XMLHttpRequest;e.open("POST","/editor-api/dataset/enumerate"),e.onload=function(){200===e.status?location.reload():(alert(`Error: ${e.response}`),console.error(e.response))},e.send(JSON.stringify({template_string:this.enumerateFiles.template.value,spreadsheet_data:this.enumerateFiles.spreadsheet.value,spreadsheet_name:this.enumerateFiles.spreadsheet.name}))}}},E=t(1241);const C=(0,E.A)(_,[["render",y],["__scopeId","data-v-48ecb63a"]]);var D=C;const w={class:"upload"},T={class:"file-picker"},A={class:"input"},I={class:"submit"};function N(e,a,t,i,n,l){return(0,s.uX)(),(0,s.CE)("div",w,[a[3]||(a[3]=(0,s.Lk)("div",{class:"subtitle"},"Upload dataset file:",-1)),(0,s.Lk)("div",T,[(0,s.Lk)("div",A,[a[2]||(a[2]=(0,s.Lk)("label",{for:"upload"},"Dataset filename:",-1)),(0,s.Lk)("input",{id:"template",type:"file",accept:".pbtxt,.pb,.xlsx,.csv",onChange:a[0]||(a[0]=e=>l.setFile(e))},null,32)])]),(0,s.Lk)("div",I,[(0,s.Lk)("button",{id:"upload-submit",onClick:a[1]||(a[1]=(...e)=>l.submitUpload&&l.submitUpload(...e))},"Submit Upload")]),a[4]||(a[4]=(0,s.Lk)("div",{class:"copy"},[(0,s.eW)("Choose a  "),(0,s.Lk)("code",null,".pbtxt/.xlsx/.csv"),(0,s.eW)("  file compiled with the  "),(0,s.Lk)("code",null,"construct_dataset.py"),(0,s.eW)("  script in the  "),(0,s.Lk)("a",{href:"https://github.com/Center-for-Mechanical-Control-of-Chem/cmccdb-schema"},"cmccdb-schema repository")],-1))])}var R={data(){return{uploadFile:{name:null,loading:!1,value:null}}},methods:{async setFile(e){const a=e.target.files||e.dataTransfer.files;if(!a.length)return console.error("No file");this.uploadFile.loading=!0,this.uploadFile.name=a[0].name;const t=new FileReader;t.onload=e=>{this.uploadFile.value=e.target.result,this.uploadFile.loading=!1},t.readAsArrayBuffer(a[0])},submitUpload(){if(this.uploadFile.loading)return alert("Files are still processing. Please try again in a moment.");if(!this.uploadFile.value)return alert("You must upload a file for the dataset before submitting.");this.urlQuery=window.location.search;const e=new XMLHttpRequest;e.open("POST",`/api/dev/contribute/upload${this.urlQuery}`),e.fileInfo={filename:""+this.uploadFile.name},console.log("POST:",this.uploadFile.name,`/api/upload${this.urlQuery}`);const a=this.uploadFile.value;e.onload=()=>{200===e.status?location.reload():alert("Error: "+e.response)},e.onerror=()=>{alert("Error: request failed (possibly due to timeout)")},e.send(a)}}};const X=(0,E.A)(R,[["render",N],["__scopeId","data-v-f01fad12"]]);var S=X;const U={class:"create"},x={class:"file-picker"},q={class:"input"},O={class:"submit"};function W(e,a,t,n,l,o){return(0,s.uX)(),(0,s.CE)("div",U,[a[3]||(a[3]=(0,s.Lk)("div",{class:"subtitle"},"Create dataset:",-1)),(0,s.Lk)("div",x,[(0,s.Lk)("div",q,[a[2]||(a[2]=(0,s.Lk)("label",{for:"new-dataset-name"},"Dataset name:",-1)),(0,s.bo)((0,s.Lk)("input",{id:"new-dataset-name",type:"text","onUpdate:modelValue":a[0]||(a[0]=e=>l.newDatasetName=e)},null,512),[[i.Jo,l.newDatasetName]])])]),(0,s.Lk)("div",O,[(0,s.Lk)("button",{id:"create-dataset",onClick:a[1]||(a[1]=(...e)=>o.createDataset&&o.createDataset(...e))},"Create Dataset")]),a[4]||(a[4]=(0,s.Lk)("div",{class:"copy"},"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec tincidunt eros eget magna venenatis, nec volutpat justo ornare. Praesent mauris enim, dignissim nec posuere ut, mollis at lacus. Phasellus ut ultricies arcu, ultrices efficitur enim. Donec pharetra turpis nulla, id elementum felis fermentum sit amet. In id imperdiet sapien. Quisque vulputate odio eget ex aliquet aliquam. Vestibulum a metus magna.",-1))])}var B={data(){return{loading:!0,newDatasetName:null}},methods:{async getDatasets(){const e=await fetch("/editor-api/getDatasetsByUser/ef4a7184f6bf4d2da99d8e08b36882c0");console.log("res.json",e)},createDataset(){if(!this.newDatasetName)return alert("Enter a name for the new dataset.");const e=new XMLHttpRequest;e.datasetName=this.newDatasetName,e.open("POST",`/editor-api/dataset/${this.newDatasetName}/new`),e.onload=function(){409===e.status&&alert(`Error: Dataset "${this.datasetName}" already exists`)},e.send()}},mounted(){this.getDatasets()}};const P=(0,E.A)(B,[["render",W],["__scopeId","data-v-4530c0b0"]]);var Q=P;const $={class:"upload"},G={class:"submit"};function H(e,a,t,i,n,l){return(0,s.uX)(),(0,s.CE)("div",$,[a[1]||(a[1]=(0,s.Lk)("div",{class:"subtitle"},[(0,s.Lk)("div",{class:"copy"},"WARNING: RECONFIGURING THE DATABASE DELETES ALL EXISTING DATA")],-1)),(0,s.Lk)("div",G,[(0,s.Lk)("button",{id:"upload-submit",onClick:a[0]||(a[0]=(...e)=>l.reconfigureDatabase&&l.reconfigureDatabase(...e))},"RECONFIGURE")])])}var M={data(){},methods:{reconfigureDatabase(){const e=new XMLHttpRequest;e.open("POST","/api/reconfigure"),e.onload=()=>{200===e.status?location.reload():alert("Error: "+e.response)},e.onerror=()=>{alert("Error: request failed (possibly due to timeout)")}}}};const Y=(0,E.A)(M,[["render",H],["__scopeId","data-v-1c342219"]]);var j=Y,J={components:{LoadingSpinner:v.A,Enumerate:D,Upload:S,Datasets:Q,Reconfigure:j},data(){return{loading:!0,tabs:["Introduction","Upload"],activeTab:"Upload"}},computed:{},methods:{},async mounted(){const e=localStorage.getItem("notFirstTime");e||(localStorage.setItem("notFirstTime","false"),this.activeTab="Introduction"),this.$route.query.active_tab&&(this.activeTab=this.$route.query.active_tab),this.loading=!1}};const V=(0,E.A)(J,[["render",h],["__scopeId","data-v-59fe66ec"]]);var K=V}}]);
//# sourceMappingURL=992.095efe06.js.map