"use strict";(self["webpackChunkapp"]=self["webpackChunkapp"]||[]).push([[505],{3100:function(e,t,a){a.d(t,{A:function(){return C}});var n=a(6768),i=a(4232),r=a(5130);const s={class:"table-main"},l={class:"table-container"},c={class:"header"},o={class:"title-holder"},d={class:"title"},u={key:0,class:"search-area"},g={class:"content"},h={class:"entities-holder"},k={key:0,class:"pagination"},p={class:"select"},v={class:"word"},b={class:"paginav no-click"},L={class:"word"},m={class:"word"};function f(e,t,a,f,y,P){return(0,n.uX)(),(0,n.CE)("div",s,[(0,n.Lk)("div",l,[(0,n.Lk)("div",c,[(0,n.Lk)("div",o,[(0,n.Lk)("div",d,(0,i.v_)(a.title),1)])]),a.displaySearch?((0,n.uX)(),(0,n.CE)("div",u,[t[8]||(t[8]=(0,n.Lk)("label",{for:"search"},"Search: ",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"search","onUpdate:modelValue":t[0]||(t[0]=e=>y.searchString=e)},null,512),[[r.Jo,y.searchString]])])):(0,n.Q3)("",!0),(0,n.Lk)("div",g,[(0,n.Lk)("div",h,[(0,n.RG)(e.$slots,"default",{entities:P.paginatedEntities},void 0,!0)]),y.pagination&&y.entities?((0,n.uX)(),(0,n.CE)("div",k,[(0,n.Lk)("div",p,[t[10]||(t[10]=(0,n.eW)("Showing ")),(0,n.bo)((0,n.Lk)("select",{name:"pagination",id:"pagination","onUpdate:modelValue":t[1]||(t[1]=e=>y.pagination=e)},t[9]||(t[9]=[(0,n.Lk)("option",{value:"10"},"10",-1),(0,n.Lk)("option",{value:"25"},"25",-1),(0,n.Lk)("option",{value:"50"},"50",-1),(0,n.Lk)("option",{value:"100"},"100",-1)]),512),[[r.u1,y.pagination]]),(0,n.eW)(" of "+(0,i.v_)(P.filteredEntities.length)+" entries.",1)]),(0,n.Lk)("div",{class:"paginav first",onClick:t[2]||(t[2]=e=>y.currentPage=1)},t[11]||(t[11]=[(0,n.Lk)("img",{class:"chevron",src:"/img/arrowL.png"},null,-1),(0,n.Lk)("img",{class:"chevron",src:"/img/arrowL.png"},null,-1),(0,n.Lk)("span",{class:"word"},"First",-1)])),(0,n.Lk)("div",{class:"prev paginav",onClick:t[3]||(t[3]=e=>y.currentPage=P.pagiPrev)},t[12]||(t[12]=[(0,n.Lk)("img",{class:"chevron",src:"/img/arrowL.png"},null,-1),(0,n.Lk)("span",{class:"word"},"Previous",-1)])),(0,n.Lk)("div",{class:(0,i.C4)(["paginav",y.currentPage>1?"":"no-click"]),onClick:t[4]||(t[4]=e=>y.currentPage=y.currentPage>1?y.currentPage-1:y.currentPage)},[(0,n.Lk)("span",v,(0,i.v_)(y.currentPage>1?y.currentPage-1:"..."),1)],2),(0,n.Lk)("div",b,[(0,n.Lk)("span",L,(0,i.v_)(y.currentPage),1)]),(0,n.Lk)("div",{class:(0,i.C4)(["paginav",y.currentPage<P.lastPage?"":"no-click"]),onClick:t[5]||(t[5]=e=>y.currentPage=y.currentPage<P.lastPage?y.currentPage+1:y.currentPage)},[(0,n.Lk)("span",m,(0,i.v_)(y.currentPage<P.lastPage?y.currentPage+1:"..."),1)],2),(0,n.Lk)("div",{class:"next paginav",onClick:t[6]||(t[6]=e=>y.currentPage=P.pagiNext)},t[13]||(t[13]=[(0,n.Lk)("span",{class:"word"},"Next",-1),(0,n.Lk)("img",{class:"chevron",src:"/img/arrowR.png"},null,-1)])),(0,n.Lk)("div",{class:"paginav last",onClick:t[7]||(t[7]=e=>y.currentPage=P.lastPage)},t[14]||(t[14]=[(0,n.Lk)("span",{class:"word"},"Last",-1),(0,n.Lk)("img",{class:"chevron",src:"/img/arrowR.png"},null,-1),(0,n.Lk)("img",{class:"chevron",src:"/img/arrowR.png"},null,-1)]))])):(0,n.Q3)("",!0)])])])}var y={props:{tableData:Array,title:String,displaySearch:{type:Boolean,default:!0}},watch:{pagination(){this.currentPage=1}},data(){return{entities:null,localFilters:[],search:"",currentPage:1,loading:!0,pagination:10,searchString:""}},computed:{filteredEntities(){if(!this.entities)return[];let e=this.entities;return this.searchString&&(e=e.filter((e=>{let t=Array.apply(null,Array(this.searchArray.length));return this.searchArray.forEach(((a,n)=>{Object.keys(e).forEach((i=>{null!==e[i]&&e[i].toString().toLowerCase().includes(a.toLowerCase())&&(t[n]=!0)}))})),console.log("matching",t.includes(void 0)),!t.includes(void 0)}))),e},paginatedEntities(){return this.filteredEntities.slice(this.pagiBottom,this.pagiTop)},pagiBottom(){return(this.currentPage-1)*this.pagination},pagiTop(){return this.currentPage*this.pagination||1},lastPage(){return this.pagination&&this.filteredEntities?Math.ceil((this.filteredEntities.length||1)/this.pagination):1},pagiPrev(){return 1===this.currentPage?this.lastPage:this.currentPage-1},pagiNext(){return this.currentPage===this.lastPage?1:this.currentPage+1},searchArray(){return this.searchString.split(" ")}},methods:{},async mounted(){this.entities=this.tableData}},P=a(1241);const w=(0,P.A)(y,[["render",f],["__scopeId","data-v-da308df0"]]);var C=w},6466:function(e,t,a){a.d(t,{A:function(){return d}});var n=a(6768),i=a(5130);const r={class:"spinner-main"};function s(e,t,a,s,l,c){return(0,n.uX)(),(0,n.CE)("div",r,[(0,n.bF)(i.eB,{name:"fade"},{default:(0,n.k6)((()=>t[0]||(t[0]=[(0,n.Lk)("div",{class:"loader-ring"},[(0,n.Lk)("div"),(0,n.Lk)("div"),(0,n.Lk)("div"),(0,n.Lk)("div")],-1)]))),_:1})])}var l={name:"LoadingSpinner",data(){return{}}},c=a(1241);const o=(0,c.A)(l,[["render",s],["__scopeId","data-v-da99072c"]]);var d=o},5505:function(e,t,a){a.r(t),a.d(t,{default:function(){return w}});var n=a(6768),i=a(4232);const r={id:"browse-main"},s={class:"table-container"},l={class:"column"},c=["onClick"],o={class:"column"},d={class:"column"},u={class:"column"},g=["loading"],h=["body"],k={style:{"text-align":"center"}},p={class:"container"},v={class:"error-message"};function b(e,t,a,b,L,m){const f=(0,n.g2)("router-link"),y=(0,n.g2)("EntityTable"),P=(0,n.g2)("LoadingSpinner");return(0,n.uX)(),(0,n.CE)("div",r,[L.tableData.length?((0,n.uX)(),(0,n.Wv)(y,{key:0,tableData:L.tableData,title:""},{default:(0,n.k6)((({entities:a})=>[(0,n.Lk)("div",s,[t[1]||(t[1]=(0,n.Lk)("div",{class:"column label"},"Dataset ID",-1)),t[2]||(t[2]=(0,n.Lk)("div",{class:"column label"},"Name",-1)),t[3]||(t[3]=(0,n.Lk)("div",{class:"column label"},"Description",-1)),t[4]||(t[4]=(0,n.Lk)("div",{class:"column label"},"Size",-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(a,((t,a)=>((0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.Lk)("div",l,[(0,n.bF)(f,{to:{name:"search",query:{dataset_ids:t["Dataset ID"],limit:100,database:e.$route.query.database}}},{default:(0,n.k6)((()=>[(0,n.eW)((0,i.v_)(t["Dataset ID"]),1)])),_:2},1032,["to"]),(0,n.Lk)("button",{class:"material-symbols-outlined btn btn-secondary p-1 rounded-circle delete-icon",onClick:e=>m.deleteDataset(t["Dataset ID"])},"close",8,c)]),(0,n.Lk)("div",o,(0,i.v_)(t.Name),1),(0,n.Lk)("div",d,(0,i.v_)(t.Description?.length>75?t.Description.substr(0,75)+"...":t.Description),1),(0,n.Lk)("div",u,(0,i.v_)(t.Size),1)],64)))),256))])])),_:1},8,["tableData"])):L.loading?((0,n.uX)(),(0,n.CE)("div",{key:1,class:"loading",loading:L.loading},[(0,n.bF)(P)],8,g)):((0,n.uX)(),(0,n.CE)("div",{key:2,class:"container",body:L.body},[(0,n.Lk)("p",k,(0,i.v_)(L.body),1)],8,h)),(0,n.Lk)("div",p,[(0,n.Lk)("button",{class:"w-100 btn btn-danger",onClick:t[0]||(t[0]=(...e)=>m.resetDatabase&&m.resetDatabase(...e))},"Reset Database"),(0,n.Lk)("div",v,[t[5]||(t[5]=(0,n.Lk)("code",null,null,-1)),(0,n.Lk)("pre",null,(0,i.v_)(L.traceback),1)])])])}a(4603),a(7566),a(8721);var L=a(3100),m=a(6466),f={components:{EntityTable:L.A,LoadingSpinner:m.A},methods:{getSearchParams(){const e=new URLSearchParams(window.location.search);return e},getDBQuery(){const e=this.getSearchParams(),t=e.get("database"),a=null!==t&&t.length?`?database=${t}`:"?";return a},deleteDataset(e){if(e in this.deleteConfirmations){const t=this.getDBQuery();fetch(`/api/delete/${e}`+t,{method:"POST"}).then((e=>e.json())).then((e=>{"traceback"in e?(this.traceback="ERROR: \n"+e["traceback"],alert("An error occured: see the traceback below")):window.location.reload()}))}else alert("this will permanently delete this dataset, click again only if you are sure you want to delete"),this.deleteConfirmations[e]=!0},resetDatabase(){if(this.resetConfirmationCounter<1)alert("This will reset this database, are you sure you want to do that?"),this.resetConfirmationCounter+=1;else if(this.resetConfirmationCounter<2)alert("Are you really sure? This is your last warning"),this.resetConfirmationCounter+=1;else{const e=this.getDBQuery();fetch("/api/reconfigure"+e,{method:"POST"}).then((e=>e.json())).then((e=>{"traceback"in e?(this.traceback="ERROR: \n"+e["traceback"],alert("An error occured: see the traceback below")):window.location.reload()}))}}},data(){return{loading:!0,tableData:[],body:"No datasets found",traceback:null,deleteConfirmations:{},resetConfirmationCounter:0}},mounted(){this.urlQuery=window.location.search,console.log("GET: ",`/api/fetch_datasets${this.urlQuery}`),fetch(`/api/fetch_datasets${this.urlQuery}`,{method:"GET"}).then((e=>e.json())).then((e=>{"traceback"in e?(this.traceback="ERROR: \n"+e["traceback"],alert("An error occured: see the traceback below")):"response"in e?(this.body=e["response"],this.loading=!1):(this.tableData=e,this.loading=!1)}))}},y=a(1241);const P=(0,y.A)(f,[["render",b],["__scopeId","data-v-7a6b5f88"]]);var w=P}}]);
//# sourceMappingURL=505.65e05199.js.map