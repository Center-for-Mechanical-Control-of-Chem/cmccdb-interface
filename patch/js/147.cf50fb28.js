"use strict";(self["webpackChunkapp"]=self["webpackChunkapp"]||[]).push([[147],{3100:function(e,t,s){s.d(t,{A:function(){return O}});var i=s(6768),a=s(4232),n=s(5130);const o={class:"table-main"},l={class:"table-container"},r={class:"header"},u={class:"title-holder"},c={class:"title"},h={key:0,class:"search-area"},d={class:"content"},m={class:"entities-holder"},p={key:0,class:"pagination"},v={class:"select"},g={class:"word"},k={class:"paginav no-click"},L={class:"word"},y={class:"word"};function b(e,t,s,b,M,C){return(0,i.uX)(),(0,i.CE)("div",o,[(0,i.Lk)("div",l,[(0,i.Lk)("div",r,[(0,i.Lk)("div",u,[(0,i.Lk)("div",c,(0,a.v_)(s.title),1)])]),s.displaySearch?((0,i.uX)(),(0,i.CE)("div",h,[t[8]||(t[8]=(0,i.Lk)("label",{for:"search"},"Search: ",-1)),(0,i.bo)((0,i.Lk)("input",{type:"text",id:"search","onUpdate:modelValue":t[0]||(t[0]=e=>M.searchString=e)},null,512),[[n.Jo,M.searchString]])])):(0,i.Q3)("",!0),(0,i.Lk)("div",d,[(0,i.Lk)("div",m,[(0,i.RG)(e.$slots,"default",{entities:C.paginatedEntities},void 0,!0)]),M.pagination&&M.entities?((0,i.uX)(),(0,i.CE)("div",p,[(0,i.Lk)("div",v,[t[10]||(t[10]=(0,i.eW)("Showing ")),(0,i.bo)((0,i.Lk)("select",{name:"pagination",id:"pagination","onUpdate:modelValue":t[1]||(t[1]=e=>M.pagination=e)},t[9]||(t[9]=[(0,i.Lk)("option",{value:"10"},"10",-1),(0,i.Lk)("option",{value:"25"},"25",-1),(0,i.Lk)("option",{value:"50"},"50",-1),(0,i.Lk)("option",{value:"100"},"100",-1)]),512),[[n.u1,M.pagination]]),(0,i.eW)(" of "+(0,a.v_)(C.filteredEntities.length)+" entries.",1)]),(0,i.Lk)("div",{class:"paginav first",onClick:t[2]||(t[2]=e=>M.currentPage=1)},t[11]||(t[11]=[(0,i.Lk)("img",{class:"chevron",src:"/img/arrowL.png"},null,-1),(0,i.Lk)("img",{class:"chevron",src:"/img/arrowL.png"},null,-1),(0,i.Lk)("span",{class:"word"},"First",-1)])),(0,i.Lk)("div",{class:"prev paginav",onClick:t[3]||(t[3]=e=>M.currentPage=C.pagiPrev)},t[12]||(t[12]=[(0,i.Lk)("img",{class:"chevron",src:"/img/arrowL.png"},null,-1),(0,i.Lk)("span",{class:"word"},"Previous",-1)])),(0,i.Lk)("div",{class:(0,a.C4)(["paginav",M.currentPage>1?"":"no-click"]),onClick:t[4]||(t[4]=e=>M.currentPage=M.currentPage>1?M.currentPage-1:M.currentPage)},[(0,i.Lk)("span",g,(0,a.v_)(M.currentPage>1?M.currentPage-1:"..."),1)],2),(0,i.Lk)("div",k,[(0,i.Lk)("span",L,(0,a.v_)(M.currentPage),1)]),(0,i.Lk)("div",{class:(0,a.C4)(["paginav",M.currentPage<C.lastPage?"":"no-click"]),onClick:t[5]||(t[5]=e=>M.currentPage=M.currentPage<C.lastPage?M.currentPage+1:M.currentPage)},[(0,i.Lk)("span",y,(0,a.v_)(M.currentPage<C.lastPage?M.currentPage+1:"..."),1)],2),(0,i.Lk)("div",{class:"next paginav",onClick:t[6]||(t[6]=e=>M.currentPage=C.pagiNext)},t[13]||(t[13]=[(0,i.Lk)("span",{class:"word"},"Next",-1),(0,i.Lk)("img",{class:"chevron",src:"/img/arrowR.png"},null,-1)])),(0,i.Lk)("div",{class:"paginav last",onClick:t[7]||(t[7]=e=>M.currentPage=C.lastPage)},t[14]||(t[14]=[(0,i.Lk)("span",{class:"word"},"Last",-1),(0,i.Lk)("img",{class:"chevron",src:"/img/arrowR.png"},null,-1),(0,i.Lk)("img",{class:"chevron",src:"/img/arrowR.png"},null,-1)]))])):(0,i.Q3)("",!0)])])])}var M={props:{tableData:Array,title:String,displaySearch:{type:Boolean,default:!0}},watch:{pagination(){this.currentPage=1}},data(){return{entities:null,localFilters:[],search:"",currentPage:1,loading:!0,pagination:10,searchString:""}},computed:{filteredEntities(){if(!this.entities)return[];let e=this.entities;return this.searchString&&(e=e.filter((e=>{let t=Array.apply(null,Array(this.searchArray.length));return this.searchArray.forEach(((s,i)=>{Object.keys(e).forEach((a=>{null!==e[a]&&e[a].toString().toLowerCase().includes(s.toLowerCase())&&(t[i]=!0)}))})),console.log("matching",t.includes(void 0)),!t.includes(void 0)}))),e},paginatedEntities(){return this.filteredEntities.slice(this.pagiBottom,this.pagiTop)},pagiBottom(){return(this.currentPage-1)*this.pagination},pagiTop(){return this.currentPage*this.pagination||1},lastPage(){return this.pagination&&this.filteredEntities?Math.ceil((this.filteredEntities.length||1)/this.pagination):1},pagiPrev(){return 1===this.currentPage?this.lastPage:this.currentPage-1},pagiNext(){return this.currentPage===this.lastPage?1:this.currentPage+1},searchArray(){return this.searchString.split(" ")}},methods:{},async mounted(){this.entities=this.tableData}},C=s(1241);const x=(0,C.A)(M,[["render",b],["__scopeId","data-v-da308df0"]]);var O=x},1138:function(e,t,s){s.r(t),s.d(t,{default:function(){return nt}});var i=s(6768),a=s(4232);const n={id:"search-main"},o={class:"options-holder"},l={class:"search-results"},r={key:1,class:"no-results"},u={key:2,class:"loading"};function c(e,t,s,c,h,d){const m=(0,i.g2)("SearchOptions"),p=(0,i.g2)("SearchResults"),v=(0,i.g2)("LoadingSpinner");return(0,i.uX)(),(0,i.CE)("div",n,[(0,i.Lk)("div",{class:(0,a.C4)(["search-options-container",h.showOptions?"slide-out":"hidden"])},[t[2]||(t[2]=(0,i.Lk)("div",{class:"title"},"Filters & Options",-1)),(0,i.Lk)("div",o,[(0,i.bF)(m,{onSearchOptions:d.updateSearchOptions},null,8,["onSearchOptions"])]),(0,i.Lk)("div",{class:"slide-out-tab",onClick:t[0]||(t[0]=e=>h.showOptions=!h.showOptions)},t[1]||(t[1]=[(0,i.Lk)("div",{class:"line"},null,-1),(0,i.Lk)("div",{class:"line"},null,-1),(0,i.Lk)("div",{class:"line"},null,-1)]))],2),(0,i.Lk)("div",l,[!h.loading&&h.searchResults?.length?((0,i.uX)(),(0,i.Wv)(p,{key:0,searchResults:h.searchResults},null,8,["searchResults"])):h.loading||h.searchResults?.length?((0,i.uX)(),(0,i.CE)("div",u,[(0,i.bF)(v)])):((0,i.uX)(),(0,i.CE)("div",r,t[3]||(t[3]=[(0,i.Lk)("div",{class:"title"},"No results. Adjust the filters and options and search again.",-1)])))])])}s(4114);var h=s(5130);const d={class:"search-options"},m={key:0,class:"options-container",id:"searchByReagent"},p={class:"subtitle"},v={class:"tabs"},g=["onClick"],k={class:"section"},L={class:"general options"},y={class:"slider-input"},b={class:"value"},M={class:"section"},C={class:"reagent options"},x={class:"draw"},O=["onClick"],f={class:"field long"},w=["onUpdate:modelValue"],S={class:"delete"},_=["onClick"],R={key:0,class:"copy"},T={id:"add-component"},P={class:"section"},E={class:"reagent options"},I={class:"draw"},V=["onClick"],X={class:"field long"},A=["onUpdate:modelValue"],D={class:"delete"},B=["onClick"],F={key:0,class:"copy"},K={id:"add-component"},N={key:0,class:"options-container",id:"searchByReaction"},q={class:"slider-input multi"},$={class:"value"},Q={class:"slider-input multi"},W={class:"value"},U={key:0,class:"options-container",id:"searchByMechano"},j={class:"section"},G={class:"general options"},H={class:"section"},J={class:"general options"},Y={key:0,class:"options-container",id:"searchByDataset"},z={class:"options-container"},Z={class:"section"},ee={class:"search-button"};function te(e,t,s,n,o,l){const r=(0,i.g2)("SearchItemList"),u=(0,i.g2)("MultiRangeSlider"),c=(0,i.g2)("ModalKetcher");return(0,i.uX)(),(0,i.CE)(i.FK,null,[(0,i.Lk)("div",d,[(0,i.Lk)("div",{class:(0,a.C4)(["options-title",o.showReagentOptions?"":"closed"]),onClick:t[0]||(t[0]=e=>o.showReagentOptions=!o.showReagentOptions)},t[14]||(t[14]=[(0,i.Lk)("span",null,"Components",-1),(0,i.Lk)("i",{class:"material-icons"},"expand_less",-1)]),2),(0,i.bF)(h.eB,{name:"expand"},{default:(0,i.k6)((()=>[o.showReagentOptions?((0,i.uX)(),(0,i.CE)("div",m,[t[26]||(t[26]=(0,i.Lk)("div",{class:"section"},null,-1)),(0,i.Lk)("div",p,[(0,i.Lk)("div",v,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(o.matchModes,(e=>((0,i.uX)(),(0,i.CE)("div",{class:(0,a.C4)(["tab capitalize",o.reagentOptions.matchMode===e?"selected":""]),onClick:t=>o.reagentOptions.matchMode=e},(0,a.v_)(e),11,g)))),256))])]),(0,i.Lk)("div",k,[t[17]||(t[17]=(0,i.Lk)("div",{class:"subtitle"},"General Options",-1)),(0,i.Lk)("div",L,[t[16]||(t[16]=(0,i.Lk)("label",{for:"stereo"},"Use Stereochemistry",-1)),(0,i.bo)((0,i.Lk)("input",{id:"stereo",type:"checkbox","onUpdate:modelValue":t[1]||(t[1]=e=>o.reagentOptions.useStereochemistry=e)},null,512),[[h.lH,o.reagentOptions.useStereochemistry]]),"similar"===o.reagentOptions.matchMode?((0,i.uX)(),(0,i.CE)(i.FK,{key:0},[t[15]||(t[15]=(0,i.Lk)("label",{for:"similarity"},"Similarity Threshold",-1)),(0,i.Lk)("div",y,[(0,i.Lk)("div",b,(0,a.v_)(l.simThresholdDisplay),1),(0,i.bo)((0,i.Lk)("input",{id:"similarity",type:"range",min:"0.1",max:"1.0",step:"0.01","onUpdate:modelValue":t[2]||(t[2]=e=>o.reagentOptions.similarityThreshold=e)},null,512),[[h.Jo,o.reagentOptions.similarityThreshold]])])],64)):(0,i.Q3)("",!0)])]),(0,i.Lk)("div",M,[t[21]||(t[21]=(0,i.Lk)("div",{class:"subtitle"},"Reactants & Reagents",-1)),(0,i.Lk)("div",C,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(o.reagentOptions.reactants,((e,s)=>((0,i.uX)(),(0,i.CE)(i.FK,null,[(0,i.Lk)("div",x,[(0,i.Lk)("button",{onClick:e=>l.openKetcherModal("reactants",s)},t[18]||(t[18]=[(0,i.Lk)("i",{class:"material-icons"},"draw",-1)]),8,O)]),(0,i.Lk)("div",f,[(0,i.bo)((0,i.Lk)("input",{type:"text","onUpdate:modelValue":t=>e.smileSmart=t},null,8,w),[[h.Jo,e.smileSmart]])]),(0,i.Lk)("div",S,[(0,i.Lk)("button",{onClick:e=>o.reagentOptions.reactants.splice(s,1)},t[19]||(t[19]=[(0,i.Lk)("i",{class:"material-icons"},"delete",-1)]),8,_)])],64)))),256)),o.reagentOptions.reactants.length?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",R,"No components")),(0,i.Lk)("div",T,[(0,i.Lk)("button",{type:"button",onClick:t[3]||(t[3]=e=>this.reagentOptions.reactants.push({smileSmart:"",source:"input"}))},t[20]||(t[20]=[(0,i.Lk)("i",{class:"material-icons"},"add",-1),(0,i.eW)(" Add Component")]))])])]),(0,i.Lk)("div",P,[t[25]||(t[25]=(0,i.Lk)("div",{class:"subtitle"},"Products",-1)),(0,i.Lk)("div",E,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(o.reagentOptions.products,((e,s)=>((0,i.uX)(),(0,i.CE)(i.FK,null,[(0,i.Lk)("div",I,[(0,i.Lk)("button",{onClick:e=>l.openKetcherModal("products",s)},t[22]||(t[22]=[(0,i.Lk)("i",{class:"material-icons"},"draw",-1)]),8,V)]),(0,i.Lk)("div",X,[(0,i.bo)((0,i.Lk)("input",{type:"text","onUpdate:modelValue":t=>e.smileSmart=t},null,8,A),[[h.Jo,e.smileSmart]])]),(0,i.Lk)("div",D,[(0,i.Lk)("button",{onClick:e=>o.reagentOptions.products.splice(s,1)},t[23]||(t[23]=[(0,i.Lk)("i",{class:"material-icons"},"delete",-1)]),8,B)])],64)))),256)),o.reagentOptions.products.length?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",F,"No components")),(0,i.Lk)("div",K,[(0,i.Lk)("button",{type:"button",onClick:t[4]||(t[4]=e=>this.reagentOptions.products.push({smileSmart:"",source:"output"}))},t[24]||(t[24]=[(0,i.Lk)("i",{class:"material-icons"},"add",-1),(0,i.eW)(" Add Component")]))])])])])):(0,i.Q3)("",!0)])),_:1}),(0,i.Lk)("div",{class:(0,a.C4)(["options-title",o.showReactionOptions?"":"closed"]),onClick:t[5]||(t[5]=e=>o.showReactionOptions=!o.showReactionOptions)},t[27]||(t[27]=[(0,i.Lk)("span",null,"Reactions",-1),(0,i.Lk)("i",{class:"material-icons"},"expand_less",-1)]),2),(0,i.bF)(h.eB,{name:"expand"},{default:(0,i.k6)((()=>[o.showReactionOptions?((0,i.uX)(),(0,i.CE)("div",N,[(0,i.bF)(r,{title:"Reaction IDs",itemList:o.reactionOptions.reactionIds},null,8,["itemList"]),(0,i.bF)(r,{title:"Reaction SMARTS",itemList:o.reactionOptions.reactionSmarts},null,8,["itemList"]),(0,i.Lk)("div",q,[t[28]||(t[28]=(0,i.Lk)("label",{for:"yield"},"Yield",-1)),(0,i.Lk)("div",$,(0,a.v_)(o.reactionOptions.min_yield)+"% - "+(0,a.v_)(o.reactionOptions.max_yield)+"%",1),(0,i.bF)(u,{baseClassName:"multi-range-slider",miin:0,max:100,step:1,ruler:!1,label:!1,minValue:o.reactionOptions.min_yield,maxValue:o.reactionOptions.max_yield,onInput:l.updateYield},null,8,["minValue","maxValue","onInput"])]),(0,i.Lk)("div",Q,[t[29]||(t[29]=(0,i.Lk)("label",{for:"yield"},"Conversion",-1)),(0,i.Lk)("div",W,(0,a.v_)(o.reactionOptions.min_conversion)+"% - "+(0,a.v_)(o.reactionOptions.max_conversion)+"%",1),(0,i.bF)(u,{baseClassName:"multi-range-slider",miin:0,max:100,step:1,ruler:!1,label:!1,minValue:o.reactionOptions.min_conversion,maxValue:o.reactionOptions.max_conversion,onInput:l.updateConversion},null,8,["minValue","maxValue","onInput"])])])):(0,i.Q3)("",!0)])),_:1}),(0,i.Lk)("div",{class:(0,a.C4)(["options-title",o.showMechanoOptions?"":"closed"]),onClick:t[6]||(t[6]=e=>o.showMechanoOptions=!o.showMechanoOptions)},t[30]||(t[30]=[(0,i.Lk)("span",null,"Mechanochemistry",-1),(0,i.Lk)("i",{class:"material-icons"},"expand_less",-1)]),2),(0,i.bF)(h.eB,{name:"expand"},{default:(0,i.k6)((()=>[o.showMechanoOptions?((0,i.uX)(),(0,i.CE)("div",U,[(0,i.Lk)("div",j,[t[32]||(t[32]=(0,i.Lk)("div",{class:"subtitle"},"Treatment Type",-1)),(0,i.Lk)("div",G,[(0,i.bo)((0,i.Lk)("select",{id:"treatment",type:"selected","onUpdate:modelValue":t[7]||(t[7]=e=>o.mechanoOptions.treatmentTypes=e),style:{width:"90%"},multiple:""},t[31]||(t[31]=[(0,i.Lk)("option",{value:"BALL_MILL"},"Ball Milling",-1),(0,i.Lk)("option",{value:"TIP_ARRAY"},"Tip Array",-1),(0,i.Lk)("option",{value:"HAND_GRIND"},"Hand Grinding",-1),(0,i.Lk)("option",{value:"TWIN_SCREW"},"Twin Screw",-1)]),512),[[h.u1,o.mechanoOptions.treatmentTypes]])])]),(0,i.Lk)("div",H,[t[34]||(t[34]=(0,i.Lk)("div",{class:"subtitle"},"Treatment Modifiers",-1)),(0,i.Lk)("div",J,[t[33]||(t[33]=(0,i.Lk)("label",{for:"liquass",style:{"margin-right":"15px"}},"Liquid Assisted",-1)),(0,i.bo)((0,i.Lk)("input",{id:"liquass",type:"checkbox","onUpdate:modelValue":t[8]||(t[8]=e=>o.mechanoOptions.liquidAssisted=e)},null,512),[[h.lH,o.mechanoOptions.liquidAssisted]])])])])):(0,i.Q3)("",!0)])),_:1}),(0,i.Lk)("div",{class:(0,a.C4)(["options-title",o.showDatasetOptions?"":"closed"]),onClick:t[9]||(t[9]=e=>o.showDatasetOptions=!o.showDatasetOptions)},t[35]||(t[35]=[(0,i.Lk)("span",null,"Datasets",-1),(0,i.Lk)("i",{class:"material-icons"},"expand_less",-1)]),2),(0,i.bF)(h.eB,{name:"expand"},{default:(0,i.k6)((()=>[o.showDatasetOptions?((0,i.uX)(),(0,i.CE)("div",Y,[(0,i.bF)(r,{title:"Dataset IDs",itemList:o.datasetOptions.datasetIds},null,8,["itemList"]),(0,i.bF)(r,{title:"DOIs",itemList:o.datasetOptions.DOIs},null,8,["itemList"])])):(0,i.Q3)("",!0)])),_:1}),t[38]||(t[38]=(0,i.Lk)("div",{class:"options-title",id:"searchParameters"},"Search Parameters",-1)),(0,i.Lk)("div",z,[(0,i.Lk)("div",Z,[t[36]||(t[36]=(0,i.Lk)("label",{for:"limit"},"Result Limit ",-1)),(0,i.bo)((0,i.Lk)("input",{id:"limit",type:"number",min:"0","onUpdate:modelValue":t[10]||(t[10]=e=>o.searchParams.limit=e)},null,512),[[h.Jo,o.searchParams.limit]])]),(0,i.Lk)("div",ee,[(0,i.Lk)("button",{onClick:t[11]||(t[11]=(...e)=>l.emitSearchOptions&&l.emitSearchOptions(...e))},t[37]||(t[37]=[(0,i.Lk)("b",null,"Search",-1)]))])])]),o.showKetcherModal?((0,i.uX)(),(0,i.Wv)(c,{key:0,smiles:o.reagentOptions[o.ketcherModalSet][o.ketcherModalSmile].smileSmart,onUpdateSmiles:t[12]||(t[12]=e=>o.reagentOptions[o.ketcherModalSet][o.ketcherModalSmile].smileSmart=e),onCloseModal:t[13]||(t[13]=e=>o.showKetcherModal=!1)},null,8,["smiles"])):(0,i.Q3)("",!0)],64)}const se={class:"background"},ie={class:"modal",id:"ketcher_modal"},ae={class:"modal-content"},ne={class:"modal-footer"},oe={key:0,class:"modal-loading"};function le(e,t,s,a,n,o){const l=(0,i.g2)("LoadingSpinner");return(0,i.uX)(),(0,i.CE)("div",se,[(0,i.Lk)("div",ie,[(0,i.Lk)("div",ae,[t[2]||(t[2]=(0,i.Lk)("div",{class:"modal-body"},[(0,i.Lk)("iframe",{id:"ketcher-iframe",src:"/ketcher"})],-1)),(0,i.Lk)("div",ne,[(0,i.Lk)("button",{type:"button",onClick:t[0]||(t[0]=e=>this.$emit("closeModal"))},"Cancel"),(0,i.Lk)("button",{type:"button",onClick:t[1]||(t[1]=e=>o.saveSmiles())},"Save")]),(0,i.bF)(h.eB,{name:"fade"},{default:(0,i.k6)((()=>[n.loading?((0,i.uX)(),(0,i.CE)("div",oe,[(0,i.bF)(l)])):(0,i.Q3)("",!0)])),_:1})])])])}var re=s(6466),ue={components:{LoadingSpinner:re.A},props:{smiles:String},data(){return{contWin:null,mutatedSmiles:"",loading:!0}},methods:{getKetcher(){const e=setInterval((()=>{this.contWin||document.getElementById("ketcher-iframe").contentWindow.ketcher&&(this.contWin=document.getElementById("ketcher-iframe").contentWindow,clearInterval(e),this.drawSmiles(),this.loading=!1)}),1e3)},drawSmiles(){if(this.mutatedSmiles){const e=new XMLHttpRequest;e.open("POST","/api/ketcher/molfile"),e.responseType="json",e.onload=function(){if(200===e.status){const t=e.response;document.getElementById("ketcher-iframe").contentWindow.ketcher.setMolecule(t)}},e.send(this.mutatedSmiles)}},async saveSmiles(){this.mutatedSmiles=await this.contWin.ketcher.getSmiles(),this.$emit("updateSmiles",this.mutatedSmiles),this.$emit("closeModal")}},mounted(){this.mutatedSmiles=this.smiles,this.getKetcher()}},ce=s(1241);const he=(0,ce.A)(ue,[["render",le],["__scopeId","data-v-567bb920"]]);var de=he;const me={class:"item-list"},pe={class:"title"},ve={class:"list"},ge={class:"text"},ke={class:"delete"},Le=["onClick"],ye={class:"input"};function be(e,t,s,n,o,l){return(0,i.uX)(),(0,i.CE)("div",me,[(0,i.Lk)("div",pe,(0,a.v_)(s.title),1),(0,i.Lk)("div",ve,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(o.mutatedList,((e,s)=>((0,i.uX)(),(0,i.CE)(i.FK,null,[(0,i.Lk)("div",ge,(0,a.v_)(e),1),(0,i.Lk)("div",ke,[(0,i.Lk)("button",{onClick:e=>l.deleteItem(s)},t[2]||(t[2]=[(0,i.Lk)("i",{class:"material-icons"},"delete",-1)]),8,Le)])],64)))),256))]),(0,i.Lk)("div",ye,[(0,i.bo)((0,i.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>o.itemToAdd=e)},null,512),[[h.Jo,o.itemToAdd]]),(0,i.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>l.updateList&&l.updateList(...e))},t[3]||(t[3]=[(0,i.Lk)("i",{class:"material-icons"},"add",-1),(0,i.Lk)("span",null,"Add",-1)]))])])}var Me={props:{title:String,itemList:Array},data(){return{mutatedList:[],itemToAdd:""}},methods:{updateList(){this.mutatedList.push(this.itemToAdd),this.itemToAdd="",this.$emit("update:itemList",this.mutatedList)},deleteItem(e){this.mutatedList.splice(e,1),this.$emit("update:itemList",this.mutatedList)}},mounted(){this.mutatedList=this.itemList||[]}};const Ce=(0,ce.A)(Me,[["render",be],["__scopeId","data-v-e66538dc"]]);var xe=Ce;const Oe={class:"bar"},fe=["min","max","step","value"],we={class:"caption"},Se={class:"min-caption"},_e={class:"bar-inner"},Re=["min","max","step","value"],Te={class:"caption"},Pe={class:"max-caption"},Ee={key:0,class:"ruler"},Ie={key:1,class:"sub-ruler"},Ve={key:2,class:"labels"};function Xe(e,t,s,n,o,l){return(0,i.uX)(),(0,i.CE)("div",{class:(0,a.C4)([s.baseClassName,0===o.rangeMarginValue?"zero-ranage-margin":""]),onMousewheel:t[10]||(t[10]=(0,h.D$)(((...e)=>l.onMouseWheel&&l.onMouseWheel(...e)),["prevent","stop"]))},[(0,i.Lk)("div",Oe,[(0,i.Lk)("div",{class:"bar-left",style:(0,a.Tr)({width:l.barMin+"%"}),onClick:t[0]||(t[0]=(...e)=>l.onBarLeftClick&&l.onBarLeftClick(...e))},null,4),(0,i.Lk)("input",{class:"input-type-range input-type-range-min",type:"range",min:l.minimum,max:l.maximum,step:s.step,value:o.valueMin,onInput:t[1]||(t[1]=(0,h.D$)(((...e)=>l.onInputMinChange&&l.onInputMinChange(...e)),["stop","prevent"]))},null,40,fe),(0,i.Lk)("div",{class:"thumb thumb-left",onMousedown:t[2]||(t[2]=(...e)=>l.onLeftThumbMousedown&&l.onLeftThumbMousedown(...e)),onTouchstart:t[3]||(t[3]=(...e)=>l.onLeftThumbMousedown&&l.onLeftThumbMousedown(...e))},[(0,i.Lk)("div",we,[(0,i.Lk)("span",Se,(0,a.v_)(s.minCaption||l.barMinVal),1)])],32),(0,i.Lk)("div",_e,[(0,i.Lk)("div",{class:"bar-inner-left",onClick:t[4]||(t[4]=(...e)=>l.onInnerBarLeftClick&&l.onInnerBarLeftClick(...e))}),(0,i.Lk)("div",{class:"bar-inner-right",onClick:t[5]||(t[5]=(...e)=>l.onInnerBarRightClick&&l.onInnerBarRightClick(...e))})]),(0,i.Lk)("input",{class:"input-type-range input-type-range-max",type:"range",min:l.minimum,max:l.maximum,step:s.step,value:o.valueMax,onInput:t[6]||(t[6]=(0,h.D$)(((...e)=>l.onInputMaxChange&&l.onInputMaxChange(...e)),["stop","prevent"]))},null,40,Re),(0,i.Lk)("div",{class:"thumb thumb-right",onMousedown:t[7]||(t[7]=(...e)=>l.onRightThumbMousedown&&l.onRightThumbMousedown(...e)),onTouchstart:t[8]||(t[8]=(...e)=>l.onRightThumbMousedown&&l.onRightThumbMousedown(...e))},[(0,i.Lk)("div",Te,[(0,i.Lk)("span",Pe,(0,a.v_)(s.maxCaption||l.barMaxVal),1)])],32),(0,i.Lk)("div",{class:"bar-right",style:(0,a.Tr)({width:l.barMax+"%"}),onClick:t[9]||(t[9]=(...e)=>l.onBarRightClick&&l.onBarRightClick(...e))},null,4)]),s.ruler?((0,i.uX)(),(0,i.CE)("div",Ee,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(l.stepCount,(e=>((0,i.uX)(),(0,i.CE)("div",{key:e,class:"ruler-rule"})))),128))])):(0,i.Q3)("",!0),l.subStepCount?((0,i.uX)(),(0,i.CE)("div",Ie,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(l.subStepCount,(e=>((0,i.uX)(),(0,i.CE)("div",{key:e,class:"ruler-sub-rule"})))),128))])):(0,i.Q3)("",!0),s.label?((0,i.uX)(),(0,i.CE)("div",Ve,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(l.scaleLabels,(e=>((0,i.uX)(),(0,i.CE)("div",{class:"label",key:e},(0,a.v_)(e),1)))),128))])):(0,i.Q3)("",!0)],34)}var Ae={name:"MultiRangeSlider",props:{baseClassName:{type:String,default:"multi-range-slider"},min:{type:Number},max:{type:Number},minValue:{type:Number},maxValue:{type:Number},step:{type:Number,default:1},preventWheel:{type:Boolean,default:!1},ruler:{type:Boolean,default:!0},label:{type:Boolean,default:!0},labels:{type:Array},minCaption:{type:String},maxCaption:{type:String},rangeMargin:{type:Number}},data(){let e=this.labels||[],t=void 0===this.min?0:this.min,s=e.length?e.length-1:100,i=void 0===this.max?s:this.max,a=void 0===this.minValue?25:this.minValue;e.length&&void 0===this.minValue&&(a=1);let n=this.maxValue||75;if(e.length&&void 0===this.maxValue&&(n=e.length-2),i<=t)throw new Error("Invalid props min or max");if(a>n)throw new Error("Invalid props minValue or maxValue");let o=void 0===this.rangeMargin?this.step:this.rangeMargin,l=o%this.step;return l&&(o=o+this.step-l),{valueMin:a<t?t:a,valueMax:n>i?i:n,interVal:null,startX:null,mouseMoveCounter:null,barBox:null,barValue:0,rangeMarginValue:o}},methods:{onBarLeftClick(){this.valueMin-this.step>=this.minimum?this.valueMin-=this.step:this.valueMin=this.minimum},onInnerBarLeftClick(){this.valueMin+this.rangeMarginValue<this.valueMax&&(this.valueMin+=this.step)},onBarRightClick(){this.valueMax+this.step<=this.maximum?this.valueMax+=this.step:this.valueMax=this.maximum},onInnerBarRightClick(){this.valueMax-this.rangeMarginValue>this.valueMin&&(this.valueMax-=this.step)},onInputMinChange(e){let t=parseFloat(e.target.value);t<=this.valueMax-this.rangeMarginValue&&t>=this.minimum?this.valueMin=t:e.target.value=this.valueMin},onInputMaxChange(e){let t=parseFloat(e.target.value);t>=this.valueMin+this.rangeMarginValue&&t<=this.maximum?this.valueMax=t:e.target.value=this.valueMax},onLeftThumbMousedown(e){if(e.preventDefault(),this.startX=e.clientX,"touchstart"===e.type){if(1!==e.touches.length)return;this.startX=e.touches[0].clientX}this.mouseMoveCounter=0,this.barValue=this.valueMin,this.barBox=e.target.parentNode.getBoundingClientRect(),document.addEventListener("mousemove",this.onLeftThumbMousemove),document.addEventListener("mouseup",this.onLeftThumbMouseup),document.addEventListener("touchmove",this.onLeftThumbMousemove),document.addEventListener("touchend",this.onLeftThumbMouseup)},onLeftThumbMousemove(e){this.mouseMoveCounter++;let t=e.clientX;"touchmove"===e.type&&(t=e.touches[0].clientX);let s=t-this.startX,i=s/this.barBox.width,a=this.barValue+(this.maximum-this.minimum)*i,n=a%this.step;a-=n,a<this.minimum?a=this.minimum:a>this.valueMax-this.rangeMarginValue&&(a=this.valueMax-this.rangeMarginValue),this.valueMin=a},onLeftThumbMouseup(){document.removeEventListener("mousemove",this.onLeftThumbMousemove),document.removeEventListener("mouseup",this.onLeftThumbMouseup),document.removeEventListener("touchmove",this.onLeftThumbMousemove),document.removeEventListener("touchend",this.onLeftThumbMouseup)},onRightThumbMousedown(e){if(e.preventDefault(),this.startX=e.clientX,"touchstart"===e.type){if(1!==e.touches.length)return;this.startX=e.touches[0].clientX}this.mouseMoveCounter=0,this.barValue=this.valueMax,this.barBox=e.target.parentNode.getBoundingClientRect(),document.addEventListener("mousemove",this.onRightThumbMousemove),document.addEventListener("mouseup",this.onRightThumbMouseup),document.addEventListener("touchmove",this.onRightThumbMousemove),document.addEventListener("touchend",this.onRightThumbMouseup)},onRightThumbMousemove(e){this.mouseMoveCounter++;let t=e.clientX;"touchmove"===e.type&&(t=e.touches[0].clientX);let s=t-this.startX,i=s/this.barBox.width,a=this.barValue+(this.maximum-this.minimum)*i,n=a%this.step;a-=n,a<this.valueMin+this.rangeMarginValue?a=this.valueMin+this.rangeMarginValue:a>this.maximum&&(a=this.maximum),this.valueMax=a},onRightThumbMouseup(){document.removeEventListener("mousemove",this.onRightThumbMousemove),document.removeEventListener("mouseup",this.onRightThumbMouseup),document.removeEventListener("touchmove",this.onRightThumbMousemove),document.removeEventListener("touchend",this.onRightThumbMouseup)},onMouseWheel(e){if(!0===this.preventWheel)return;if(!e.shiftKey&&!e.ctrlKey)return;let t=this.step;e.deltaY<0&&(t=-t),e.shiftKey&&e.ctrlKey?this.valueMin+t>=this.minimum&&this.valueMax+t<=this.maximum&&(this.valueMin=this.valueMin+t,this.valueMax=this.valueMax+t):e.ctrlKey?(t=this.valueMax+t,t<this.valueMin+this.rangeMarginValue?t=this.valueMin+this.rangeMarginValue:t>this.maximum&&(t=this.maximum),this.valueMax=t):e.shiftKey&&(t=this.valueMin+t,t<this.minimum?t=this.minimum:t>this.valueMax-this.rangeMarginValue&&(t=this.valueMax-this.rangeMarginValue),this.valueMin=t)},triggerInput(){let e=0;this.step.toString().includes(".")&&(e=2);let t={min:this.minimum,max:this.maximum,minValue:parseFloat(this.valueMin.toFixed(e)),maxValue:parseFloat(this.valueMax.toFixed(e))};this.$emit("input",t)}},computed:{minimum(){return void 0===this.min?0:this.min},maximum(){let e=this.labels||[],t=e.length?e.length-1:100;return void 0===this.max?t:this.max},stepCount(){let e=this.labels||[];return e.length?e.length-1:Math.floor((this.maximum-this.minimum)/this.step)},subStepCount(){let e=this.labels||[];return e.length&&this.step>1?(this.maximum-this.minimum)/this.step:0},barMin(){let e=(this.valueMin-this.minimum)/(this.maximum-this.minimum)*100;return e},barMax(){let e=100-(this.valueMax-this.minimum)/(this.maximum-this.minimum)*100;return e},barMinVal(){let e=0;return this.step.toString().includes(".")&&(e=2),(this.valueMin||0).toFixed(e)},barMaxVal(){let e=0;return this.step.toString().includes(".")&&(e=2),(this.valueMax||100).toFixed(e)},scaleLabels(){let e=this.labels||[];return 0===e.length&&(e=[],e.push(this.minimum),e.push(this.maximum)),e}},watch:{valueMin(){this.triggerInput()},valueMax(){this.triggerInput()},minValue(e){this.valueMin=e<this.minimum?this.minimum:e},maxValue(e){this.valueMax=e>this.maximum?this.maximum:e}},mounted(){}};const De=(0,ce.A)(Ae,[["render",Xe]]);var Be=De,Fe={components:{ModalKetcher:de,SearchItemList:xe,MultiRangeSlider:Be},emits:["searchOptions"],data(){return{test:null,showReagentOptions:!1,showReactionOptions:!1,showDatasetOptions:!1,showMechanoOptions:!1,reagentOptions:{reactants:[],products:[],matchMode:"exact",useStereochemistry:!1,similarityThreshold:.5},reactionOptions:{reactionIds:[],reactionSmarts:[],min_yield:50,max_yield:100,min_conversion:50,max_conversion:100},datasetOptions:{datasetIds:[],DOIs:[]},mechanoOptions:{treatmentType:[],liquidAssisted:!1},searchParams:{limit:100},showKetcherModal:!1,ketcherModalSmile:0,ketcherModalSet:"reactants",matchModes:["exact","similar","substructure"]}},computed:{defaultQuery(){return this.$route.query},simThresholdDisplay(){let e="";const t=this.reagentOptions.similarityThreshold.toString();return t.length<2?e=".00":t.length<4&&(e="0"),t+e}},methods:{openKetcherModal(e,t){this.ketcherModalSmile=t,this.ketcherModalSet=e,this.showKetcherModal=!0},emitSearchOptions(){const e=[...this.reagentOptions.reactants,...this.reagentOptions.products].map((e=>({...e,matchMode:this.reagentOptions.matchMode}))),t={reagent:{reagents:e,useStereochemistry:this.reagentOptions.useStereochemistry,similarityThreshold:this.reagentOptions.similarityThreshold},reaction:this.reactionOptions,dataset:this.datasetOptions,general:this.searchParams,mechano:this.mechanoOptions};this.$emit("searchOptions",t)},setDefaultValues(){const e=this.defaultQuery;e.component?.length&&(Array.isArray(e.component)?e.component.forEach((e=>{this.addCompToOptions(e)})):this.addCompToOptions(e.component),this.reagentOptions.useStereochemistry=e.use_stereochemistry||!1,this.reagentOptions.similarityThreshold=Number(e.similarity)||.5,this.showReagentOptions=!0),this.datasetOptions.datasetIds=e.dataset_ids?.split(",")||[],this.datasetOptions.DOIs=e.dois?.split(",")||[],(this.datasetOptions.datasetIds.length||this.datasetOptions.DOIs.length)&&(this.showDatasetOptions=!0),this.reactionOptions.reactionIds=e.reaction_ids?.split(",")||[],this.reactionOptions.reactionSmarts=e.reaction_smarts?.split(",")||[],this.reactionOptions.min_yield=Number(e.min_yield)||0,this.reactionOptions.max_yield=Number(e.max_yield)||100,this.reactionOptions.min_conversion=Number(e.min_conversion)||0,this.reactionOptions.max_conversion=Number(e.max_conversion)||100,(this.reactionOptions.reactionIds.length||this.reactionOptions.reactionSmarts.length||50!==this.reactionOptions.yield||50!==this.reactionOptions.conversion)&&(this.showReactionOptions=!0),this.mechanoOptions.treatmentTypes=e.treatment_type?.split(",")||[],this.mechanoOptions.liquidAssisted=e.liquid_assisted||!1,(this.mechanoOptions.treatmentTypes||this.mechanoOptions.liquidAssisted)&&(this.showMechanoOptions=!0),this.searchParams.limit=e.limit||100},addCompToOptions(e){const t=e.split(";"),s="input"==t[1]?"reactants":"products";this.reagentOptions.matchMode=t[2],this.reagentOptions[s].push({smileSmart:t[0].replaceAll("%3D","="),source:t[1],matchMode:t[2]})},updateYield(e){this.reactionOptions.min_yield=e.minValue,this.reactionOptions.max_yield=e.maxValue},updateConversion(e){this.reactionOptions.min_conversion=e.minValue,this.reactionOptions.max_conversion=e.maxValue},updateMechTreatment(e){this.mechanoOptions.treatmentTypes=e.treatment_type,this.mechanoOptions.liquidAssisted=e.liquid_assisted}},mounted(){this.setDefaultValues()}};const Ke=(0,ce.A)(Fe,[["render",te],["__scopeId","data-v-ebcffe2e"]]);var Ne=Ke;const qe={class:"search-results-main"},$e={class:"action-button-holder"},Qe=["disabled"],We={key:0,class:"view-selected-container"};function Ue(e,t,s,n,o,l){const r=(0,i.g2)("CopyButton"),u=(0,i.g2)("ReactionCard"),c=(0,i.g2)("EntityTable"),d=(0,i.g2)("DownloadResults");return(0,i.uX)(),(0,i.CE)("div",qe,[o.formattedResults.length?((0,i.uX)(),(0,i.Wv)(c,{key:0,tableData:o.formattedResults,title:"Search Results",displaySearch:!1},{default:(0,i.k6)((({entities:e})=>[(0,i.Lk)("div",$e,[(0,i.bF)(r,{textToCopy:l.fullUrl,icon:"share",buttonText:"Shareable Link"},null,8,["textToCopy"]),(0,i.Lk)("button",{disabled:!o.formattedResults.length,onClick:t[0]||(t[0]=e=>o.showDownloadResults=!0)},"Download All Search Results",8,Qe)]),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e,(e=>((0,i.uX)(),(0,i.Wv)(u,{reaction:e,isSelectable:!0,isSelected:o.selectedReactions.includes(e.reaction_id),onClickedSelect:l.updateSelectedReactions},null,8,["reaction","isSelected","onClickedSelect"])))),256))])),_:1},8,["tableData"])):(0,i.Q3)("",!0),(0,i.bF)(h.eB,{name:"fade"},{default:(0,i.k6)((()=>[o.selectedReactions.length?((0,i.uX)(),(0,i.CE)("div",We,[(0,i.Lk)("div",{class:"view-selected-button",onClick:t[1]||(t[1]=(...e)=>l.goToViewSelected&&l.goToViewSelected(...e))},"View "+(0,a.v_)(o.selectedReactions.length)+" selected reactions",1)])):(0,i.Q3)("",!0)])),_:1}),(0,i.bF)(d,{reactionIds:o.formattedResults.map((e=>e.reaction_id)),showDownloadResults:o.showDownloadResults,onHideDownloadResults:t[2]||(t[2]=e=>o.showDownloadResults=!1)},null,8,["reactionIds","showDownloadResults"])])}var je=s(3100),Ge=s(3878),He=s(5765),Je=s(9554),Ye={props:{searchResults:Array},components:{EntityTable:je.A,LoadingSpinner:re.A,CopyButton:He.A,ReactionCard:Ge.A,DownloadResults:Je.A},data(){return{formattedResults:[],selectedReactions:[],showDownloadResults:!1}},computed:{fullUrl(){return window.location.href}},methods:{updateSelectedReactions(e){if(e.target.checked)this.selectedReactions.push(e.target.value);else{let t=this.selectedReactions.indexOf(e.target.value);-1!==t&&this.selectedReactions.splice(t,1)}},goToViewSelected(){this.$store.commit("setStoredSet",{query:window.location.search,reactions:this.selectedReactions}),this.$router.push({name:"selected-set",query:{reaction_ids:this.selectedReactions}})}},async mounted(){this.formattedResults=this.searchResults,window.location.search==this.$store.state.storedSet?.query&&(this.selectedReactions=this.$store.state.storedSet.reactions)}};const ze=(0,ce.A)(Ye,[["render",Ue],["__scopeId","data-v-e6512ca4"]]);var Ze=ze,et=s(9518),tt=s.n(et),st=s(7753),it={components:{SearchOptions:Ne,SearchResults:Ze,LoadingSpinner:re.A},watch:{"$route.query":{handler(){this.getSearchResults()},deep:!0}},data(){return{searchResults:[],queryParams:"",searchParams:{},loading:!0,urlQuery:"",showOptions:!1}},methods:{async getSearchResults(){this.loading=!0,this.urlQuery=window.location.search,console.log("GET: ",`/api/query${this.urlQuery}`);try{const e=await fetch(`/api/query${this.urlQuery}`,{method:"GET"});this.searchResults=await e.json(),this.searchResults.forEach((e=>{const t=(0,st.A)(e.proto);e.data=tt().Reaction.deserializeBinary(t).toObject()})),this.loading=!1}catch(e){console.log(e),this.searchResults=[],this.loading=!1}},updateSearchOptions(e){e.reagent.reagents.length?(this.searchParams["component"]=[],e.reagent.reagents.forEach((e=>{this.searchParams["component"].push(`${e.smileSmart};${e.source};${e.matchMode}`)})),this.searchParams["use_stereochemistry"]=e.reagent.useStereochemistry,this.searchParams["similarity"]=e.reagent.similarityThreshold):this.searchParams["component"]=[],e.mechano.treatmentTypes.length?this.searchParams["treatment_type"]=e.mechano.treatmentTypes.join(","):delete this.searchParams["treatment_type"],e.mechano.liquidAssisted?this.searchParams["liquid_assisted"]=e.mechano.liquidAssisted:delete this.searchParams["liquid_assisted"],e.dataset.DOIs.length?this.searchParams["dois"]=e.dataset.DOIs.join(","):delete this.searchParams["dois"],e.dataset.datasetIds.length?this.searchParams["dataset_ids"]=e.dataset.datasetIds.join(","):delete this.searchParams["dataset_ids"],e.dataset.DOIs.length?this.searchParams["dois"]=e.dataset.DOIs.join(","):delete this.searchParams["dois"],e.reaction.reactionIds.length?this.searchParams["reaction_ids"]=e.reaction.reactionIds.join(","):delete this.searchParams["reaction_ids"],e.reaction.reactionSmarts.length?this.searchParams["reaction_smarts"]=e.reaction.reactionSmarts.join(","):delete this.searchParams["reaction_smarts"],0!==e.reaction.min_yield||100!==e.reaction.max_yield?(this.searchParams["min_yield"]=e.reaction.min_yield,this.searchParams["max_yield"]=e.reaction.max_yield):(delete this.searchParams["min_yield"],delete this.searchParams["max_yield"]),0!==e.reaction.min_conversion||100!==e.reaction.max_conversion?(this.searchParams["min_conversion"]=e.reaction.min_conversion,this.searchParams["max_conversion"]=e.reaction.max_conversion):(delete this.searchParams["min_conversion"],delete this.searchParams["max_conversion"]),this.searchParams["limit"]=e.general.limit||100,this.$router.push({name:"search",query:this.searchParams})}},mounted(){this.getSearchResults()}};const at=(0,ce.A)(it,[["render",c],["__scopeId","data-v-3faf393b"]]);var nt=at}}]);
//# sourceMappingURL=147.cf50fb28.js.map